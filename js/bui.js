/*!
 *  BUI 简介 
 *  
 *  v1.4.4  date: 2018-05-30 
 *  
 *  BUI 是一个开放式的UI交互框架, 有着丰富的组件, 可以自由定制交互,快速开发WebApp,微信,还可以通过第三方平台开发混合移动应用.
 *
 *  BUI 专注移动快速开发
 *  -----------------------------------------------------------
 *  BUI Team
 *  部门: 政企体验创新部
 *  产品经理: 区柏荣
 *  代码设计: 王伟深 杨俊标
 *  产品设计师: 邝德如 范菊 唐竹晗
 *  -----------------------------------------------------------
 *  BUI 反馈邮箱: wangwsh@bingosoft.net
 *
 *  Copyright (c) 2016-2018
 */
var libs=window.Zepto||window.jQuery;window.router={};var bui=function(e,t){var i={};return i.debug=!0,i.isWebapp,i.currentPlatform="",i.log=!0,i.trace=!1,i["native"]={},i.config={},i.config.namespace="bui",i.config.classNamePrefix=i.config.namespace+"-",i.config.version="1.4.4",i.config.versionCode=20180530,i.config.viewport={zoom:!0,create:!0},i.config.init={auto:!0},i.config.ready={},i.config.ajax={},i.config.back={},i.config.load={},i.config.getPageParams={},i.config.refresh={},i.config.run={},i.config.checkVersion={},i.config.dialog={},i.config.confirm={},i.config.alert={},i.config.hint={},i.config.prompt={},i.config.loading={},i.config.mask={},i.config.list={},i.config.listview={},i.config.scroll={},i.config.pullrefresh={},i.config.select={},i.config.sidebar={},i.config.slide={},i.config.actionsheet={},i.config.dropdown={},i.config.accordion={},i.config.stepbar={},i.config.rating={},i.config.number={},i.config.file={},i.config.fileselect={},i.config.upload={},i.config.download={},i.config.swipe={},i.config.router={},i.config.loader={},i}(libs,window);!function(e,t){return e.prefix=function(t){return e.config.classNamePrefix+t},e.showLog=function(t,i){i=i||"";var n="";"object"==typeof t&&"message"in t&&"name"in t?n=t.message+":"+t.name+"&&stack:"+t.stack:"string"==typeof t&&(n=t),e.log&&console.error(i+" "+n),e.trace&&console.trace&&console.trace()},e.swipeDirection=function(e,t,i,n){var a=t-e,r=n-i,o=Math.abs(a),l=Math.abs(r),s=9,c=3;return s>o&&s>l?!1:o/l>c?a>0?"swiperight":"swipeleft":r>0?"swipedown":"swipeup"},e.widget=function(e){return e&&e in this?this[e]:this},e.option=function(i,n){if("object"!==e["typeof"](i)&&"undefined"==typeof n)return"string"==typeof i?this.config[i]:this.config;if("id"==i)return e.showLog("不允许修改控件的ID参数"),this;if(i&&"object"===e["typeof"](i)){var a=t.extend(this.config,i);return this.init(a)}if(this.config.hasOwnProperty(i)){var r={};r[i]=n;var a=t.extend(this.config,r);return this.init(a)}return this},e}(bui||{},libs),function(e,t){return e.on=function(e,t,i){"function"==typeof t?(i=t,t=this):(i=i,t=t),t.handle=t.handle||{},"undefined"==typeof t.handle[e]&&(t.handle[e]=[]),t.handle[e].push(i)},e.off=function(t,i,n){"function"==typeof i?(n=i,i=this):"function"==typeof n?(n=n,i=i):i=this,"undefined"===t?i.handle={}:"string"==typeof t&&"function"==typeof n?e.array.remove(n,i.handle[t]):"string"==typeof t&&(i.handle={},i.handle[t]=[])},e.trigger=function(e){try{if(this.handle[arguments[0]]instanceof Array){var t=this.handle[arguments[0]],i=[].slice.apply(arguments);i.shift();for(var n=0,a=t.length;a>n;n++)t[n].apply(this.self||this,i)}}catch(r){}},e}(bui||{},libs),function(e,t){function i(t,i){function n(t){var n=100,a=i||540,r=document.head.parentNode,o=t?t:(h/a*n).toFixed(2);return c=o,e.config.viewport.zoom&&(r.style.fontSize=c+"px"),e.trigger.call(e,"viewportinit"),this}function a(e){return h}function r(e){return p}function o(e){return g}function l(e){return v}function s(e){return f}e.trigger.call(e,"viewportbefore");var c,u=document.querySelector("meta[name=viewport]"),d="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",f=window.devicePixelRatio,h=document.documentElement.clientWidth,p=document.documentElement.clientHeight,g=parseInt(h)*parseInt(f),v=parseInt(p)*parseInt(f);if(u)e.config.viewport.create&&(u.content=d);else{var m=document.createElement("meta");m.name="viewport",m.content=d;var b=document.head;e.config.viewport.create&&b.appendChild(m)}var w=[240,320,360,375,384,412,414,435,480,512,540,768,1024,1536,2048,2732,534,854],y=[44.44,59.26,66.67,69.44,71.11,76.3,76.67,80.56,88.89,94.81,100,70,70,70,70,70,60,60],x=e.array.index(document.documentElement.clientWidth,w);return x>-1&&"undefined"==typeof t?c=y[x]:n(t),{width:a,height:r,fontSize:c,screenWidth:o,screenHeight:l,ratio:s,init:n}}return e.viewport=i,e}(bui||{},libs),function(e,t){"use strict";return e.loader=function(i){function n(e){return e=e||{},y=t.extend({},y,e),this}function r(e){if("undefined"==typeof e)return O;if("object"==typeof e&&("modules"in e||"baseUrl"in e))O=t.extend(!0,{},O,e),C=O.modules;else if("object"==typeof e&&"moduleName"in e){var i=o(e);C[e.moduleName]=i||{},O=t.extend(!0,{},O,{modules:C}),C=O.modules}return O}function o(e){var i={moduleName:"",template:"",depend:[],script:"",style:[],isDefined:!1,isLoaded:!1,callback:null,exports:{},dependExports:[]},n={};e.moduleName in C&&(n=C[e.moduleName]);var a=t.extend(!0,{},i,n,e);return a}function l(t,i,n){try{var a=s(),o=a.name}catch(l){}var u=[],d=[];if("undefined"==typeof t)return e.showLog("define第1个参数不能为空"),this;if("function"==typeof t)n=t,t=o,i=[];else if("object"===e["typeof"](t)){var f=t;t=o,i=[],n=function(){return f}}else"array"===e["typeof"](t)?(n=i,i=t,t=o):"function"==typeof i?(t=t,n=i,i=[]):(t=t,i=i,n=n);var h=t in C?C[t].script||a.src:a.src;if(y.trace&&console.log("define",t),i.length)for(var p=0;p<i.length;p++){var g=i[p];g.indexOf(".css")>-1?g.indexOf("css!")>-1?d.push(g.substr(4)):d.push(g):(u.push(g),g in C||r({moduleName:g}))}if("string"==typeof t&&"function"==typeof n){var v=function(){var e=[c,C[o].exports,C[o]],t=[];u.length&&u.forEach(function(e,i){t.push(C[e].exports)});var i=t.concat(e);return n&&n.apply(this,i)};r({moduleName:t,depend:u,style:d,script:h,callback:v})}else e.showLog("define "+t+"模块的参数格式不对");return this}function s(){var e,i,n=window.location.href,r=[],o=document.currentScript;if(n.indexOf("#")>-1?r=n.split("#"):r.push(n),b=r[0].replace("/index.html","")+"/",o)return e=o.src.replace(b,""),i=o.getAttribute("name")||e.substr("0",e.indexOf(y.scriptSuffix)),{name:i,src:e};try{a()}catch(l){var s=l.stack||l.sourceURL||l.stacktrace||"",c=s.split(/[@ ]/g).pop(),u=c.replace(/(:\d+)?:\d+$/i,""),u=u.replace(new RegExp(b,"g"),"");return o=t('script[src="'+u+'"]')[0],i=o?o.getAttribute("name"):u.replace(y.scriptSuffix,""),{name:i,src:u}}}function c(t,i){y.trace&&console.log("require",t);var n={};if(t&&"string"==typeof t&&(t=[t]),i&&"function"!=typeof i)return e.showLog("require第2个参数格式为function","bui.loader.require"),n;try{u(t,function(){if(f(x)){var e=[];t.forEach(function(n,a){d(n),e.push(C[n]&&C[n].exports),a===t.length-1&&i&&i.apply(S,e||[])})}})}catch(a){e.showLog(a,"bui.loader.require")}return this}function u(t,i){function n(e,n){var a=C[e];a&&a.depend&&a.depend.length&&u(a.depend,i),a&&(a.isDefined=!0),n==t.length-1&&i&&i.apply(a)}return t=t||[],C=O.modules,t.forEach(function(a,r){var o=C[a];C[a]&&C[a].style&&C[a]&&C[a].style.length&&v(C[a].style),e.array.compare(a,x)||x.unshift(a),o&&o.isLoaded?r==t.length-1&&(i&&i.apply(o),x=[]):o&&o.callback&&!o.script?n(a,r):g(a,function(){C[a]&&C[a].style&&C[a].style.length&&v(C[a].style),n(a,r)},function(){r==t.length-1&&(i&&i.apply(null),x=[])})}),x}function d(t){C=O.modules;var i="string"==typeof t?C[t]||{}:t,n=i.depend||[],a=null,r=[];i.dependExports=[];try{if(n.length)for(var o=0;o<n.length;o++){var l=n[o],s=C[l];s.isLoaded?r[o]=s.exports:r[o]=d(s)||s.exports,s.exports=r[o],i.dependExports.push(r[o]),s.isLoaded=!0}a=i.isLoaded?i.exports:i.callback&&i.callback.apply(i,r),i.exports=a||C[i.moduleName]&&C[i.moduleName].exports,i.isLoaded=!0,y.trace&&console.log("execute",i.moduleName)}catch(c){e.showLog(c,"bui.loader.execute")}return a}function f(e){var t=!0,i=e||[];if(C=O.modules,i.length)i.forEach(function(e,i){C[e]&&C[e].isDefined===!1&&(t=!1)});else for(var n in C)C[n]&&C[n].isDefined===!1&&(t=!1);return t}function h(t){var i=!0,n=[];if(C=O.modules,"string"==typeof t){var a=t.indexOf(",")>-1;a?n=t.split(","):n.push(t)}else t&&"array"===e["typeof"](t)&&(n=t||[]);if(n.length)n.forEach(function(e,t){e in C||(i=!1),C[e]&&C[e].isLoaded===!1&&(i=!1)});else for(var r in C)C[r]&&C[r].isLoaded===!1&&(i=!1);return i}function p(t,i,n){return"string"==typeof t?t.indexOf(".css")>-1?(m(item),i&&i(t)):g(t,i,n):t&&"array"===e["typeof"](t)&&t.forEach(function(e,a){e.indexOf(".css")>-1?(m(e),a==t.length-1&&i&&i(t)):a==t.length-1?g(e,i,n):g(e)}),this}function g(i,n,a){var r,o=this;if(C=O.modules,"undefined"==typeof i||""==i)return a&&a.call(o,i),this;if(i in C)r=i,i=C[i].script||r+y.scriptSuffix;else{var l=i.indexOf(y.scriptSuffix);l>-1?(i=i,r=i.substr(0,l)):(r=i,i+=y.scriptSuffix)}var s=document.createElement("script")||{},c=y.cache?"":"?t="+(new Date).getTime(),u=i.indexOf("http://")>-1||i.indexOf("https://")>-1;s.type="text/javascript",s.async=y.async,s.src=u?i+c:O.baseUrl+i+c,s.setAttribute("name",r),s.onload=function(){y.trace&&console.log("create",i),n&&n(i)},s.onerror=function(e){y.trace&&console.log("createError",i),a&&a(i)};var d=e.array.index(i,k),f=t('script[name="'+r+'"]').length||t('script[src="'+i+'"]').length;return d>-1||f?n&&n(i):0>d&&(document.body&&document.body.appendChild(s),k.push(i)),s=null,this}function v(t){var i,n=t.length;if("array"===e["typeof"](t))for(i=0;n>i;i++){var a=t[i];m(a)}else m(t)}function m(t){if("string"!=typeof t)return void e.showLog(t+"的格式不正确");var i=e.array.index(t,T);if(0>i){var n=document.createElement("link")||{};n.href=t+(y.cache?"":"?t="+(new Date).getTime()),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),document.head&&document.head.appendChild(n),n=null,T.push(t)}}var b,w={cache:!0,async:!1,trace:!1,scriptSuffix:".js"},y=t.extend({},w,e.config.loader,i),x=[],k=[],T=[],O={baseUrl:"",modules:{}},C={},S={init:n,define:l,require:c,map:r,"import":p,checkLoad:h,checkDefine:f};return S},e}(bui||{},libs),function(e,t){"use strict";return e.router=function(i){function n(i){if(i=t.extend(!0,{},q,e.config.router,i),q=de.config=i,"pages/main/main.html"===i.indexModule.template&&"pages/main/main.js"===i.indexModule.script||(se=loader.map(i.indexModule)),Q&&"effect"in i&&ee.forEach(function(e,t){e.effect=i.effect}),!i.id)return e.showLog("id 不能为空","bui.router.init"),!1;if(R=e.obj(i.id),z=bui.mask({appendTo:R,opacity:0,autoClose:!1}),M=bui.loading({opacity:.4}),H=window.viewport.width()||document.documentElement.clientWidth,A=window.viewport.height()||document.documentElement.clientHeight,$=R.children(".bui-router-main"),$.length)$.css({width:H,height:A});else{var n=O(i);R.html(n),$=R.children(".bui-router-main")}return B||r(i),N.call(this,"init",{target:R[0]}),this}function a(){var e=ue.get("hasCache",0);Boolean(e)&&q.reloadCache?oe.load():o()}function r(t){return window.addEventListener("load",function(){a()},!1),e.isWebapp||e.on("pageready",function(e){a()}),q.reloadCache&&window.addEventListener("beforeunload",function(e){oe.save(),N.call(W,"beforeunload",{target:ee[ee.length-1]})}),q.syncHistory&&"pushState"in window.history&&window.addEventListener("popstate",function(t){var i=l(),n=""==i.pid?q.indexModule.moduleName:i.pid,a=h(n),r=e.array.index(n,ee,"pid");r>-1?(f({index:a}),N.call(W,"popstate",{type:"back",prevTarget:ee[a-1],target:ee[a]})):(c({url:n,param:i.param}),N.call(W,"popstate",{type:"load",prevTarget:ee[ee.length-2],target:ee[ee.length-1]}))}),this}function o(t){try{var i=l();if(i.pid){if(i.pid.indexOf("http://")>-1||i.pid.indexOf("https://")>-1)return void c({url:i.pid,param:i.param,iframe:!0});c({url:i.pid,param:i.param})}else c({url:q.indexModule.moduleName,param:i.param||{}})}catch(n){e.showLog(n,"bui.router.loadUrl")}}function l(e){var t=window.location.hash||window.location.search,e=0!=e,i=t&&t.indexOf("?"),n=i>-1?t&&t.substr(1,i-1):window.location.hash.substr(1),a=n&&n.indexOf(".html"),r=a>-1?n.substr(0,a):n,o=a>-1?n:n+".html",l={};if(i>-1)for(var s=t&&t.substr(i+1),c=s&&s.split("&"),u=0;u<c.length;u++){var d=e?decodeURIComponent(c[u].split("=")[1]):c[u].split("=")[1];l[c[u].split("=")[0]]=d}return{pid:r,url:o,param:l}}function s(i){var n=t.Deferred(),a=function(t,a){return p(t.url,function(n){var r=e.guid(),o=d(t.url),l=o.pid,s=(S({id:r,content:n,pid:l}),[]);oe.add(l,{id:r,pid:l,template:n}),s.push(l),t.style&&"array"===e["typeof"](t.style)?t.style.forEach(function(e,t){s.push(e)}):t.style&&"string"===e["typeof"](t.style)&&s.push(t.style),t.script&&"array"===e["typeof"](t.script)?t.script.forEach(function(e,t){s.push(e)}):t.script&&"string"===e["typeof"](t.script)&&s.push(t.script),loader["import"](s,function(){N.call(de,"preloadend",{prevTarget:null,target:null}),a&&a(i)},function(){N.call(de,"preloadend",{prevTarget:null,target:null}),a&&a(i)})},function(i){e.showLog(t.url+"请求失败"),n.reject(t.url)}),n.promise()};return i&&"object"===e["typeof"](i)?"url"in i&&a(i,function(){n.resolve(i)}):i&&"array"===e["typeof"](i)&&i.forEach(function(e,t){var r=i.length-1;t==r?"url"in e&&a(e,function(){n.resolve(i)}):"url"in e&&a(e)}),n}function c(i){function n(){var t=S({id:I,content:"",pid:D});$&&$.attr("data-main",I).append(t),s(function(){p(F,function(t,i,n){var a=e.obj(I);if(a.html(t),l(),o(),f(),q.cache){S({id:I,content:t,pid:D});oe.add(D,{id:I,pid:D,template:t})}le.add(D,{id:I,pid:D,param:O})},function(e,t,i){r(F),N.call(de,"loadfail",e,t,i)})})}function a(){p(F,function(e,t,i){c(e);q.cache&&oe.add(D,{id:I,pid:D,template:e}),l(),s(function(){b.progress&&M&&M.hide()}),o(),f(),le.add(D,{id:I,pid:D,param:O})},function(e,t,i){r(F),N.call(de,"loadfail",e,t,i)})}function r(e){z&&z.hide(),b.progress&&M&&M.hide(),te.removeLast(),w.reject(e)}function o(){K||D in G?(u({pid:D}),ae&&s()):(loader.checkLoad(D)?u({pid:D}):loader.require(D,function(t){try{b.firstAnimate&&b.progress&&M&&M.hide(),G[D]=t||null,w.resolve(t)}catch(i){e.showLog(i,"bui.router.load"),w.reject()}}),N.call(de,"complete",{prevTarget:y,target:P}))}function l(){U=e.obj(H.id);var t=U.find(".bui-page");t.length&&q.autoInit&&e.init({id:t,height:A})}function s(t){k(),T(),U=e.obj(I);try{_||K||b.replace||b.part?(z&&z.hide(),!b.firstAnimate&&b.progress&&M&&M.hide(),t&&t(),U.css("zIndex",5)):(Y&&Y.hide(),X&&X.show(function(){z&&z.hide(),!b.firstAnimate&&b.progress&&M&&M.hide(),t&&t(),U.css("zIndex",5)}))}catch(i){e.showLog(i,"bui.router.doAnimate")}}function c(t){var i="";if(b.part)i=j({content:t}),b.id?E.html(i):e.showLog("id 不能为空","router.loadPart");else if(b.replace){var n=te.getLast();E=ee.length?e.obj(n.id):$,n.pid=D,n.url=F,n.param=O;e.array.index(D,ee,"pid");i=D in ie?oe.get(D,"template"):j({content:t}),E.html(i).attr("data-page",D)}else K||(i=S({id:I,content:t,pid:D}),$&&$.attr("data-main",I).append(i));return i}function u(e){var t=e||te.getLast(),i=ce[t.pid]&&ce[t.pid]||{},n=i.callback,a=n&&n.apply(i,i.dependExports)||i.exports;G[t.pid]=a||null,i.exports=a,K=!1,_=!1,N.call(de,"refresh",{prevTarget:y,target:t}),w.resolve(a)}function f(){var e=ee[ee.length-2]||null,t=te.getLast();_&&(N.call(de,"firstload",{prevTarget:e,target:t}),_=!1),b.part?N.call(de,"loadpart",{prevTarget:e,target:t}):N.call(de,"load",{prevTarget:e,target:t})}function h(e){var t=oe.get(e.pid,"template");c(t),e.part?(u(e),z&&z.hide(),e.progress&&M&&M.hide()):(l(),!K&&s(function(){e.progress&&M&&M.hide()}),u(e),z&&z.hide())}function g(){p(F,function(t,i,n){var a=e.obj(I);a.html(t),o(),f(),q.cache&&oe.add(D,{id:I,pid:D,template:t}),z&&z.hide(),b.progress&&M&&M.hide()},function(e,t,i){r(F),N.call(de,"loadfail",e,t,i)})}function v(e){var t=C({id:e.id,pid:e.pid,url:e.url,param:e.param});$&&$.attr("data-main",e.id).append(t),s(function(){b.progress&&M&&M.hide()})}var m={id:"",url:"",param:{},effect:"",firstAnimate:q.firstAnimate,progress:q.progress,reload:q.reload,replace:!1,iframe:!1,part:!1},b=t.extend(!0,{},m,i),w=t.Deferred(),y=te.getLast()||null,x=ee[ee.length-2]||null,O=b.param||{};b.id=(b.id&&b.id.indexOf("#")>-1?b.id.substr(1):b.id)||"";var I=b.replace?y.id:b.id||e.guid(),E=e.obj(I);if(N.call(de,"loadbefore",{prevTarget:x,target:y}),!b.url)return e.showLog("url 不能为空","bui.router.load"),w.promise();if(b.url.indexOf("tel:")>=0||b.url.indexOf("mailto:")>=0||b.url.indexOf("sms:")>=0)return e.unit.openExtral(b.url),w.promise();"undefined"==b.url&&(b.url="main"),z&&z.show(),b.progress&&M&&M.show();var L=d(b.url),D=L.pid,F=b.iframe?b.url:L.url,P={id:I,pid:D,url:F,replace:b.replace,param:O,part:{},effect:i.effect||q.effect};if(ee.length){var R=ee.length-1;ee[R].effect=b.effect}!K&&!b.part&&!b.replace&&te.add(P),b.replace&&te.replace(P);var H=te.getLast();if(b.part&&(H.part[D]={id:I,pid:D,url:F,param:O},ee.splice(ee.length-1,1,H)),b.part||(re=P),D in ie)h({pid:D,progress:b.progress,part:b.part}),N.call(de,"complete",{prevTarget:y,target:P});else{if(b.iframe)return v({id:I,pid:D,url:b.url,param:O}),w.promise();if(b.part)return g(),w.promise();if(b.firstAnimate)return n(),w.promise();a()}return w.promise()}function u(e){var i={id:"",url:"",param:{},part:!0},n=t.extend(!0,{},i,e),a=c(n);return a.promise()}function d(e){var t="",i=e;se=loader.map(),ce=se.modules;var n=i.indexOf(q.pageSuffix);return n>-1?(t=i,i=t.substr(0,n),i in ce||(i=y(t)||i)):(i=i,t=ce[i]&&ce[i].template||i+q.pageSuffix||""),{pid:i,url:t}}function f(i){var n=this,a=t.extend(!0,{index:-1,name:"",callback:null},i),r=parseInt(a.index),o=ee.length;if(r>0)return void e.showLog("index 参数只能是负数","bui.router.back");var l=te.getLast(),s=o-1;return N.call(de,"backbefore",{prevTarget:null,target:l}),a.name&&(r=h(a.name)),Math.abs(r)>s&&(r=-s),o>1&&J&&(-1>r&&T(r),J=!1,Y&&Y.show(),X&&X.hide(function(){function t(){var e={};e=G[c]||{},a.callback&&a.callback.call(n,e,s),N.call(de,"back",{prevTarget:l,target:s}),re=s,J=!0}var i=o+r;x(i),te.removeNext(i),T();var s=k(),c=s.pid;e.obj(s.id).css("zIndex",5),t()})),this}function h(t){var i,n=e.array.indexs(t,ee,"pid"),a=n.length;if(a){var r=-(ee.length-n[a-1]-1);i=0==r?-1:r}else i=-1;return i}function p(i,n,a){i?t.ajax({url:i,dataType:"html",async:q.async,success:function(e,t,a){a.url=i,n&&n(e,t,a),N.call(de,"success",e,t,a)},error:function(e,t,i){a&&a(e,t,i),N.call(de,"fail",e,t,i)}}):e.showLog("url 不能为空","bui.router.requestUrl")}function g(){K=!0;var e=ee.length-1,t=ee[e];return c({id:t.id,url:t.url,param:t.param}),this}function v(e){return e=e||{},c({url:e.url||"",param:e.param||{},replace:!0}),this}function m(){var e=te.getLast();return e.param}function b(t){if("undefined"==typeof t)return void e.showLog("必须传模块id才能获取参数,可以通过define的module参数获取");var i=te.getLast(),n=null,a=t in i.part?i.part[t]:{};return"param"in a&&(n=a.param),n}function w(e){var t;return e&&(t=e in G),t}function y(t){for(var i in ce)try{var n=ce[i].template||"";if(n===t)return i}catch(a){e.showLog(a.message)}}function x(e){$.children().each(function(i,n){i>=e&&t(n).remove()})}function k(){var t=te.getLast(),i=t.id||"",n=t.effect||q.effect;return i&&(X=e.toggle({id:i,effect:Z[n].inRight||""}),$&&$.attr("data-main",i),N.call(de,"pageshow",{target:t})),t}function T(t){t=t||-1;var i=ee.length+t-1,n=ee[i],a=n&&n.id||"",r=n&&n.effect||q.effect;return a&&(Y=e.toggle({id:a,effect:Z[r].inLeft||""})),N.call(de,"pagehide",{target:n}),n}function O(e){e=e||{};var t="";return t+='<div class="bui-router-main" style="width:'+H+"px;height:"+A+'px;">',t+="</div>"}function C(t){var i=t.param?e.setUrlParams(t.url,t.param):t.url,n="";return n+='<div id="'+t.id+'" class="bui-router-item" data-page="'+t.pid+'">',n+='<iframe class="bui-router-iframe" src="'+i+'"></iframe>',n+="</div>"}function S(e){var t="";return t+='<div id="'+e.id+'" class="bui-router-item" data-page="'+e.pid+'">',t+=e.content||"",t+="</div>"}function j(e){var t="";return t+=e.content}function I(t,i){return Q=!0,e.option.call(de,t,i)}function E(t,i){return e.on.apply(de,arguments),this}function L(t,i){return e.off.apply(de,arguments),this}function N(t){de.self=this==window||this==de?null:this,e.trigger.apply(de,arguments)}function D(){return re}function F(){var e=document.getElementById(re.id);return e}function P(i){var n=te.getLast(),a=e.obj(n.id),r="object"==typeof i?t(i):a.find(".bui-page");return r.length&&e.init({id:r,height:A}),this}var R,M,z,H,A,V={id:"",progress:!1,syncHistory:!0,autoInit:!0,firstAnimate:!1,indexModule:{moduleName:"main",template:"pages/main/main.html",script:"pages/main/main.js"},cache:!0,reloadCache:!1,reload:!1,async:!0,effect:"push",hashPrefix:"#",scriptSuffix:".js",pageSuffix:".html"},q=t.extend({},V,e.config.router,i),U=null,W=this,$=null,Y=null,X=null,B=!1,_=!0,J=!0,K=!1,Q=!1,Z={none:{inRight:"showIn",inLeft:"showIn"},fadein:{inRight:"fadeIn",inLeft:"fadeIn"},fadeinslide:{inRight:"fadeInRight",inLeft:"fadeInLeft"},slide:{inRight:"slideInRight",inLeft:"slideInLeft"},push:{inRight:"pushInRight",inLeft:"pushInLeft"},zoom:{inRight:"zoomIn",inLeft:"zoomIn"},cover:{inRight:"coverInRight",inLeft:"coverInLeft"},zoomslide:{inRight:"zoomSlideInRight",inLeft:"zoomSlideInLeft"}},G={},ee=[],te={},ie={},ne={},ae=!1,re={},oe={},le={},se=loader.map(q.indexModule),ce=se.modules,ue=e.storage({local:!1});te.get=function(){return ee},te.add=function(t){t=t||{};var i=window.location.origin+window.location.pathname+"#"+t.pid,n=e.setUrlParams(i,t.param);return ee.push(t),_?void 0:(q.syncHistory&&"pushState"in window.history&&window.history.pushState(t,null,n),ee)},te.replace=function(t){t=t||{};var i=ee.length-1,n=window.location.origin+window.location.pathname+"#"+t.pid,a=e.setUrlParams(n,t.param);return i>-1&&(ee.splice(i,1,t),q.syncHistory&&"replaceState"in window.history&&window.history.replaceState(t,null,a)),ee},te.getLast=function(e){var t=ee.length-1,i=ee[t]||{};return e?i[e]:i},te.removeNext=function(e){var t=ee.length-e;ee.splice(e,t);var i=te.getLast(),n=window.location.origin+window.location.pathname+"#"+i.pid;q.syncHistory&&"replaceState"in window.history&&window.history.replaceState(i.param,null,n)},te.removeLast=function(){var e=ee.length-1;te.removeNext(e)},oe.add=function(e,t){return ie[e]=t||{},ie[e]},oe.get=function(e,t){if(t){var i=ie[e]||{};return i[t]}return ie[e]},oe.save=function(){if(ee.length>1){var e=R.html();ue.set("cacheHtml",e),ue.set("cacheHistory",ee),ue.set("hasCache","true")}},oe.load=function(){var t=ue.get("cacheHtml",0),i=ue.get("cacheHistory",0),n=[];if(i.length>1){R.html(t),$=R.children(".bui-router-main");try{i.forEach(function(e,t){var i="string"==typeof e?JSON.parse(e):e;n.push(i),loader.require(i.pid,function(e){G[i.pid]=e||null})})}catch(a){e.showLog(a)}ee=n,k(),T(),_=!1,ae=!0,oe.clear()}},oe.clear=function(){ue.remove("cacheHistory"),ue.remove("cacheHtml"),ue.remove("hasCache")},le.add=function(e,t){return ne[e]=t||{},ne[e]},le.get=function(e,t){if(t){var i=ne[e]||{};return i[t]}return ne[e]};var de={init:n,option:I,data:{},on:E,off:L,load:c,loadPart:u,replace:v,refresh:g,back:f,isLoad:w,currentPage:F,currentModule:D,getPageParams:m,getPartParams:b,getHistory:te.get,preload:s,initScroll:P,history:{get:te.get,getLast:te.getLast}};return de},e}(bui||{},libs),function(ui,$){return ui.obj=function(e){var t;return e&&"object"==typeof e?t=$(e):e&&"string"==typeof e?t=e.indexOf(".")<0&&e.indexOf("#")<0?$("#"+e):$(e).eq(0):void 0},ui.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},ui.objectToKeyString=function(e,t){var i="";for(var n in e){var a=t?encodeURIComponent(e[n]):e[n];i+="&"+n+"="+a}return i.substr(1)},ui.keyStringToObject=function(e,t){var i,n={},a=[];try{for(a=e.split("&"),i=0;i<a.length;i++){var r=t?decodeURIComponent(a[i].split("=")[1]):a[i].split("=")[1];n[a[i].split("=")[0]]=r}}catch(o){ui.showLog(o)}return n},ui.setUrlParams=function(e,t,i){var n,i=0!=i,t="object"==typeof t?t:{},a=this.objectToKeyString(t,i);return n=""==a?e:e+"?"+a},ui.getUrlParams=function(e){var e=0!=e,t=window.location.search,i={};if(t.indexOf("?")>-1){var n=t.substr(1);i=this.keyStringToObject(n,e)}return i},ui.getUrlParam=function(e){var t=window.location.search,i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.substr(1).match(i);return null!=n?decodeURIComponent(n[2]):null},ui["typeof"]=function(e){var t=Object.prototype.toString.call(e),i=t.toLowerCase();switch(i){case"[object object]":t="object";break;case"[object function]":t="function";break;case"[object array]":t="array";break;case"[object string]":t="string";break;case"[object number]":t="number";break;case"[object null]":t="null";break;case"[object undefined]":t="undefined";break;case"[object regexp]":t="regexp";break;case"[object json]":t="json";break;case"[object boolean]":t="boolean";break;default:t=i}return t},ui.jsonToString=function(e){function t(e){function t(e,t){var a=e[t];return a&&"object"===ui["typeof"](a)?e[t]=i(a):a&&"array"===ui["typeof"](a)?e[t]=n(a):e[t]=a,e[t]}var a;if("object"===ui["typeof"](e)){for(var r in e)e[r]=t(e,r);a=JSON.stringify(e)}else"array"===ui["typeof"](e)?(e.forEach(function(i,n){e[n]=t(e,n)}),a=JSON.stringify(e)):a=e;return a}function i(e){if(e&&"object"===ui["typeof"](e)){for(var t in e){var i=e[t];"object"==typeof i&&(e[t]=JSON.stringify(i))}return e}}function n(e){return e&&"array"===ui["typeof"](e)?(e.forEach(function(t,i){"object"==typeof t&&(e[i]=JSON.stringify(t))}),e):void 0}var a;return a="object"==typeof e?t(e):e},ui.stringToJson=function(jsonStr){function stringToObject(str){var data,dataObj;try{if(data=eval(str),"array"===ui["typeof"](data))data.forEach(function(e,t){data[t]=stringToObject(e)});else if("object"===ui["typeof"](data))for(var i in data){var item=data[i];data[i]=stringToObject(item)}dataObj=data}catch(e){dataObj=str}return dataObj}var jsonObj;return jsonObj=jsonStr&&stringToObject(jsonStr)},ui.checkTargetInclude=function(e,t){var i=t,n=[];if(i.indexOf(",")>-1){n=i.split(",");var a,r=n.length;for(a=0;r>a;a++){var o=n[a];o.indexOf(".")>-1&&(n[a]=o.substr(1))}}else i.indexOf(".")>-1?n[0]=i.substr(1):n[0]=i;var l,s=n.length;for(l=0;s>l;l++)if($(e).hasClass(n[l]))return!0;return!1},ui}(bui||{},libs),function(e,t){return e.array={},e.array.index=e.inArray=function(t,i,n){var i=i||[];if("string"!=typeof n){var a=i.indexOf(t);return a}for(var r in i)try{var o=i[r]&&i[r][n];if(o===t)return parseInt(r)}catch(l){e.showLog(l.message,"bui.inArray")}return-1},e.array.compare=e.compareArray=function(e,t,i){var t=t||[];if("string"!=typeof i){var n=t.indexOf(e);return n>-1}for(var a in t)try{var r=t[a]&&t[a][i];if(r===e)return!0}catch(o){}return!1},e.array.remove=e.removeArray=function(e,t,i){var n=t||[];if("string"==typeof i)for(var a in n)try{var r=n[a]&&n[a][i];r===e&&(n=n.splice(a,1))}catch(o){}else t.map(function(t,i){t===e&&n.splice(i,1)});return n},e.array.filter=e.filterArray=function(e,t,i){var n=[],t=t||[];if("string"==typeof i)for(var a in t)try{var r=t[a]&&t[a][i],o=new RegExp(e);o.test(r)&&n.push(t[a])}catch(l){}else t.map(function(i,a,r){var o=new RegExp(e);return o.test(i)&&n.push(t[a]),i===e});return n},e.array.indexs=e.indexArray=function(e,t,i){var t=t||[],n=[];if("string"==typeof i)for(var a in t)try{var r=t[a]&&t[a][i];r===e&&n.push(+a)}catch(o){}else t.forEach(function(t,i,a){t===e?n.push(+i):n});return n},e.array.excess=e.excessArray=function(e,t,i){var t=t||[],n={},a=[];if("string"==typeof i)for(var r in t)try{var o=t[r]&&t[r][i];n[o]!==o&&(n[o]=o,a.push(t[r]))}catch(l){}else t.forEach(function(e,t,i){n[e]!==e&&(n[e]=e,a.push(e))});return a},e.array.copy=e.copyArray=function(t,i,n){var a=[];if(form=i||0,n=n||t&&t.length,!t||"array"===e["typeof"](t)){t.forEach(function(e,t){a.push(e)});var r=a.splice(i,n)||[];return r}},e}(bui||{},libs),function(e,t){return e.storage=function(t){function i(t,i,n){var a=1==o?null:d.getItem(t),r=[],l="",s=n?i[n]:i;if(null===a){r.push(i),l=JSON.stringify(r);try{d.setItem(t,l)}catch(c){"QuotaExceededError"==c.name&&console.log("超出本地存储限额！")}}else{var f=JSON.parse(a),h=n?e.array.compare(s,f,n):e.array.compare(s,f);if(h){e.array.remove(s,f,n),f[u](i);try{l=JSON.stringify(f),d.setItem(t,l)}catch(c){"QuotaExceededError"==c.name&&console.log("超出本地存储限额！")}}else{f[u](i),f.length>o&&0!=o&&f.pop();try{l=JSON.stringify(f),d.setItem(t,l)}catch(c){"QuotaExceededError"==c.name&&console.log("超出本地存储限额！")}}}return this}function n(t,i,n){var a,r=d.getItem(t)||"";try{a=r&&JSON.parse(r)}catch(o){a=r,e.showLog(o.name+": "+o.message,"bui.storage.get")}if("number"==typeof i&&n)a=a&&a[i]&&a[i][n]||void 0;else if("string"==typeof i){var l=e.array.index(i,a,n);a=a&&a[l]}else a="number"==typeof i?a&&a[i]||void 0:a;return a}function a(t,i,a){if("string"!=typeof t)return void e.showLog("要删除的字段名只能是字符串","bui.storage.remove");var r=n(t)||[];if("number"==typeof i){var o="number"==typeof a?a:o;r.splice(i,o);try{var l=JSON.stringify(r)||"";d.setItem(t,l)}catch(s){e.showLog(s.name+": "+s.message,"bui.storage.remove")}}else if("string"==typeof i){var c=e.array.remove(i,r,a);try{var l=JSON.stringify(c)||"";d.setItem(t,l)}catch(s){e.showLog(s.name+": "+s.message,"bui.storage.remove")}}else d.removeItem(t);return this}function r(){return d.clear(),this}var o,l,s,c=1;"number"==typeof t||"string"==typeof t?(o=0==parseInt(t)?0:parseInt(t)||c,s=!0,l=!0):"object"==typeof t?(o=t&&0==t.size?0:t.size||c,s=!t||0!=t.local,l=!t||0!=t.reverse):(o=c,s=!0,l=!0);var u=l?"push":"unshift",d=s?localStorage:sessionStorage;return{get:n,set:i,remove:a,clear:r}},e}(bui||{},libs),function(e,t){return e.unit={},e.unit.remToPx=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)*t).toFixed(2);return e},e.unit.pxToRem=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.pxToRemZoom=function(e){var t=100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.debounce=function(e,t,i){var n;return function(){var a=i||this,r=arguments,o=function(){n=null,e.apply(a,r)};clearTimeout(n),n=setTimeout(o,t)}},e.unit.throttle=function(e,t,i){t||(t=250);var n,a;return function(){var r=i||this,o=+new Date,l=arguments;n&&n+t>o?(clearTimeout(a),a=setTimeout(function(){n=o,e.apply(r,l)},t)):(n=o,e.apply(r,l))}},e.unit.startWithCss=function(e){var t=new RegExp("^\\.|^#"),i="string"==typeof e?t.test(e):!1;return i},e.unit.startWithId=function(e){var t=new RegExp("^#"),i="string"==typeof e?t.test(e):!1;return i},e.unit.startWithClass=function(e){var t=new RegExp("^\\."),i="string"==typeof e?t.test(e):!1;return i},e.unit.tel=function(t){var t=String(t),i="tel:";0==t.indexOf("+")&&(i="wtai://wp/mc;");var n=parseInt(t);return window.location.href=i+n,e},e.unit.sms=function(t,i){var n=navigator.userAgent,a=/(iPhone|iPad|iOS)/i.test(n),r=a?"&":"?";return window.location.href="sms:"+t+r+"body="+i,e},e.unit.mailto=function(t){var t="email"in t?t:{};return"string"==typeof t.email&&t.email.indexOf("@")>0?window.location.href="mailto:"+t.email+"?subject="+(t.subject||"")+"&body="+(t.body||"")+"&cc="+(t.cc||""):e.showLog(email+"格式不正确"),e},e.unit.openExtral=function(t){var i=[],n="",t=String(t);if(t.indexOf("mailto:")>=0)if(i=t.split("mailto:"),n=i[1],n.indexOf("?")>-1){var a=n.split("?"),r=e.keyStringToObject(a[1]);r.email=a[0],e.unit.mailto(r)}else e.unit.mailto({email:n});if(t.indexOf("tel:")>=0&&(i=t.split("tel:"),n=parseInt(i[1]),e.unit.tel(n)),t.indexOf("sms:")>=0)if(i=t.split("sms:"),n=i[1],t.indexOf("=")>=0){var o=t.split("="),l=o[1];e.unit.sms(n,l)}else e.unit.sms(n);return e},e}(bui||{},libs),function(e,t){return e.platform=function(){function e(e){return/Windows NT/i.test(c)}function t(){return/Macintosh/i.test(c)}function i(e){return/(Android|Linux)/i.test(c)}function n(e){return/(iPhone)/i.test(c)}function a(e){var t=!1;return 3==window.devicePixelRatio&&375==document.documentElement.clientWidth&&812==document.documentElement.clientHeight&&(t=!0),t}function r(e){return/(iPad)/i.test(c)}function o(e){return/(iPhone|iPad|iOS)/i.test(c)}function l(e){return/(micromessenger)/i.test(c)}function s(e){return/(crosswalk)/i.test(c)}var c=navigator.userAgent;return{isAndroid:i,isIphone:n,isIpad:r,isIos:o,isWeiXin:l,isBingotouch:s,isMac:t,isIphoneX:a,isWindow:e}}(),e}(bui||{},libs),function(e,t){return e.checkVersion=function(i){function n(e){o(e)}function a(){e.platform.isIos()?e.run({id:f,"native":h["native"]}):e.run({id:d,"native":h["native"]})}function r(i){g.on("click",function(){s>m?(T(),k({title:"新版本"+u,content:c,buttons:i.buttons,width:i.width,height:i.height,mask:i.mask,callback:function(){var e=t(this).text().trim();"立即下载"==e&&a()}})):(O(),e.hint(y)),i.callback&&i.callback.call(this)}),v=!0}function o(i){e.ajax(i).done(function(n){var o=n,l=parseInt(o.minVersionCode);d=o.downloadUrl||"",f=o.iosDownloadUrl||"",c=o.remark||"检测到新版本"+u+",是否立即下载",
s=parseInt(o.versionCode),u=o.versionName,o.isForced?(T(),l>m?k({title:i.title,content:w,width:i.width,height:i.height,mask:i.mask,autoClose:!1,buttons:[{name:"立即下载",className:"primary-reverse"}],callback:function(){try{a()}catch(t){e.showLog(t)}}}):m>l&&s>m?k({title:i.title,content:c,buttons:i.buttons,width:i.width,height:i.height,mask:i.mask,callback:function(){try{var i=t(this).text().trim();"立即下载"==i&&a()}catch(n){e.showLog(n)}}}):(O(),e.hint(y))):s>m?T():O(),h.onSuccess&&h.onSuccess(o),!v&&h.id&&r(i)}).fail(function(t){h.onFail&&h.onFail(),i.tips.fail&&e.hint(i.tips.fail)})}var l={id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},currentVersion:"",currentVersionCode:"",width:400,height:260,mask:!0,url:"",data:{},"native":!0,method:"GET",buttons:[{name:"取消",className:""},{name:"立即下载",className:"primary-reverse"}],timeout:2e4,callback:null,onSuccess:null,onFail:null};i=i||{};var s,c,u,d,f,h=t.extend(!0,l,e.config.checkVersion,i),p='<span class="bui-badges"></span>',g=t(h.id),v=!1,m=parseInt(h.currentVersionCode||e.config.versionCode),b=h.currentVersion||e.config.version,w=h.tips.minVersion,y=h.tips.nowVersion||"您目前的版本"+b+",已经是最新了 ^_^",x=h.target.indexOf("#")>-1?e.obj(h.target):g?g.find(h.target):null,k=e.confirm;n(h);var T=function(){var e=x&&x.find(".bui-badges").length;e||x&&x.append(p)},O=function(){x&&x.find(".bui-badges").remove()}},e}(bui||{},libs),function(e,t){return e.timer=function(i){function n(){return d=h,f=!0,clearTimeout(p),this}function a(){return h=c?s.times:0,clearTimeout(p),g(),this}function r(){if(f&&(h=d,f=!1),0==h)return s.callback&&s.callback.call(this),h=0,u&&u.text(h),void clearTimeout(p);var e=10>h?"0"+h:h;return u&&u.text(e),s.onProcess&&s.onProcess.call(this,h),h--,p=setTimeout(function(){r()},s.interval),this}function o(){if(f&&(h=d,f=!1),h==s.times)return s.callback&&s.callback.call(this),h=s.times,u&&u.text(h),void clearTimeout(p);var e=10>h?"0"+h:h;return u&&u.text(e),s.onProcess&&s.onProcess.call(this,h),h++,p=setTimeout(function(){o()},s.interval),this}var l={interval:1e3,target:this,reduce:!0,callback:null,onProcess:null,times:10},s=t.extend({},l,i),c=s.reduce,u=e.obj(s.target),d=0,f=!1,h=c?s.times:0,p=null,g=c?r:o;return{stop:function(){d=0,h=c?s.times:0,clearTimeout(p)},start:g,restart:a,pause:n}},e}(bui||{},libs),function(e,t){return e.animate=function(i){function n(t){return t.id?(L=e.obj(t.id),L.css({"-webkit-transition":H,transition:H}),N=t.open3D,D=t.zoom,F=t.animates||[],R=P.config=t,this):void e.showLog("animate id不能为空","bui.animate")}function a(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:D?-(t/100)+"rem":-t+"px";var i="translateX("+e+")";return F.push(i),M.push(i),this}function r(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:D?t/100+"rem":t+"px";var i="translateX("+e+")";return F.push(i),M.push(i),this}function o(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:D?-(t/100)+"rem":-t+"px";var i="translateY("+e+")";return F.push(i),M.push(i),this}function l(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:D?t/100+"rem":t+"px";var i="translateY("+e+")";return F.push(i),M.push(i),this}function s(e){var t=String(e),e=t.indexOf(",")>-1?t:e+",1",i="scale("+e+")";return F.push(i),M.push(i),this}function c(e){var e=String(e),t="scaleX("+e+")";return F.push(t),M.push(t),this}function u(e){var e=String(e),t="scaleY("+e+")";return F.push(t),M.push(t),this}function d(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="rotate("+e+")";return F.push(i),M.push(i),this}function f(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="rotateX("+e+")";return F.push(i),M.push(i),this}function h(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="rotateY("+e+")";return F.push(i),M.push(i),this}function p(e){var e,i=String(e),n=[];i.indexOf(",")>-1?(n=i.split(","),e="",t.each(n,function(t,i){2>t&&(e+=i.indexOf("deg")>-1?","+i:","+i+"deg")}),e=e.substr(1)):e=i.indexOf("deg")>-1?i:i+"deg,0";var a="skew("+e+")";return F.push(a),M.push(a),this}function g(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="skewX("+e+")";return F.push(i),M.push(i),this}function v(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="skewY("+e+")";return F.push(i),M.push(i),this}function m(e){var t=String(e);return L.css({"-webkit-transform-origin":t,"transform-origin":t}),this}function b(e,t){var i=t||"ease-out";return H="number"==typeof e?"all "+e+"ms "+i:0==e||"none"==e?"none":1==e?"all 300ms "+i:e||"all 300ms "+i,L.css({"-webkit-transition":H,transition:H}),this}function w(){return F=[],M=[],z=[],A=0,this}function y(e){return V&&(b(),V=!1),L.css({"-webkit-transform":"",transform:""}),"none"!=H&&L.one("webkitTransitionEnd",function(){e&&e.call(P,this)}),w(),this}function x(e){var t=N?M.join("")+"translateZ(0)":M.join("");try{z[A]=[],z[A].push(F.join("")),F=[],A++}catch(i){}return L.css({"-webkit-transform":t,transform:t}),"none"!=H?L.one("webkitTransitionEnd",function(){e&&e.call(P,this)}):e&&e.call(P,this),this}function k(e){function t(e){var r=e[n]||[],o=e[n+1]||[];i=N?r.join("")+"translateZ(0)":r.join(""),i=M.join("")+i.replace(/\(.*?\)/g,"(0)"),L.css({"-webkit-transform":"",transform:""}),n++;try{L.one("webkitTransitionEnd",function(){return o&&o.length?void t(a):(n=0,void(historyCache=[]))})}catch(l){}}var i,n=0,a=z.reverse();return t(a),this}function T(e,t){return L.css({"-webkit-transform":e,transform:e}),t&&"none"!=b&&L.one("webkitTransitionEnd",function(){t.call(P,this)}),this}function O(e){return e=parseFloat(e)||100,N=!0,L.parent().css({perspective:e+"px"}),this}function C(e,t){var i={};return"object"==typeof e?(i=e,t=""):"string"==typeof e&&(i[e]=t||""),L.css(i),this}function S(t){var i={};return e.widget.call(i,t)}function j(t,i){return e.option.call(P,t,i)}var I={id:"",zoom:!0,open3D:!1,animates:[]};if("object"==typeof i&&i.id)i=i||{};else{var E=i||"";i={},i.id=E}var L,N,D,F,P={origin:m,transition:b,property:C,open3D:O,transform:T,start:x,stop:y,clear:w,left:a,right:r,up:o,down:l,scale:s,scaleX:c,scaleY:u,rotate:d,rotateX:f,rotateY:h,skew:p,skewX:g,skewY:v,reverse:k,widget:S,option:j,config:R,init:n},R=P.config=t.extend(!0,{},I,i),M=[],z=[],H="all 300ms ease-out";n(R);var A=0,V=!1;return P},e}(bui||{},libs),function(e,t){"use strict";return e.toggle=function(i){function n(t){if(t=t||b,w=!1,!t.id)return void e.showLog("toggle id不能为空","bui.toggle");h=e.obj(t.id),b=m.config=t,v=h.attr("class")||"";var i=t.effect,n=t.inOrder?e.array.index(i,y.hideInOrder):e.array.index(i,y.hide),a=i&&(e.array.index(i,y.show)>-1?e.array.index(i,y.show):n);return T=!(h[0]&&"none"==h[0].style.display||"none"==h.css("display")),0>a?(g=y.show[0],p=t.inOrder?y.hideInOrder[0]:y.hide[0],this):(g=y.show[a],void(p=t.inOrder?y.hideInOrder[a]:y.hide[a]))}function a(){return T}function r(t,i){return w?void 0:x||k?(x=!1,"function"==typeof t?(i=t,t=g||""):t=t||g||"",g=t,h[0]&&"none"==h[0].style.display&&h.css("display","block"),h.addClass("animated "+t),"showIn"==t||"showOut"==t?(b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!0,x=!0):h.one("webkitAnimationEnd",function(){try{!T&&h.css("display","block"),b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!0,x=!0}catch(n){e.showLog(n,"toggle show method")}}),this):!1}function o(t,i){return w||!x&&!k?void 0:(k=!1,"function"==typeof t?(i=t,t=p||""):t=t||p||"",h.css("display","block").addClass("animated "+t),p=t,"showIn"==t||"showOut"==t?(h.css("display","none"),b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!1,k=!0):h.one("webkitAnimationEnd",function(){try{h.css("display","none"),b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!1,k=!0}catch(n){e.showLog(n,"toggle hide method")}}),this)}function l(){return h.remove(),this}function s(e){var e=1==e;h&&(h.off(),e&&h.remove()),w=!0}function c(t){var i={};return e.widget.call(i,t)}function u(t,i){return e.option.call(m,t,i)}var d={id:"",effect:"fadeIn",revert:!0,inOrder:!1};if("string"==typeof i){var f=i||"";i={},i.id=f}var h,p,g,v,m={show:r,hide:o,remove:l,isShow:a,destroy:s,widget:c,option:u,config:b,init:n},b=m.config=t.extend(!0,{},d,i),w=!1,y={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","rollIn","flipInX","flipInY","lightSpeedIn","showIn","slideInRight","slideInLeft","coverInLeft","coverInRight","zoomSlideInLeft","zoomSlideInRight","pushInLeft","pushInRight"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutDownBig","fadeOutUpBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutRight","slideOutLeft","coverOutLeft","coverOutRight","zoomSlideOutLeft","zoomSlideOutRight","pushOutLeft","pushOutRight"],hideInOrder:["fadeOut","fadeOutRight","fadeOutLeft","fadeOutDown","fadeOutUp","fadeOutRightBig","fadeOutLeftBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutLeft","slideOutRight","coverOutRight","coverOutLeft","zoomSlideOutRight","zoomSlideOutLeft","pushOutRight","pushOutLeft"]},x=!0,k=!0,T=!1;return n(b),m},e}(bui||{},libs),function(e,t){return e.mask=function(i){var n=[];return function(i){function a(e){var i=t.extend(!0,O,e);return N=!1,O=T.config=i,y=S.css("position"),i.autoTrigger&&l(i),this}function r(e){var i=t.extend(!0,O,e),a=function(e){var t=this;if(E){var a=n[n.length-1];a&&a.callback&&a.callback.call(this,e)}else i.callback&&i.callback.call(t,e);i.autoClose&&f(),e.stopPropagation()};I.on("click.bui",a),L=!0}function o(t){var i=t,n=i.background?i.background:"rgba(0,0,0,"+i.opacity+")",a="";return a+='<div class="'+e.prefix("mask")+'" style="background:'+n+";z-index:"+i.zIndex+'"></div>'}function l(e){if(!N){var i=t.extend(!0,O,e),n=o(i);return I=S.children(".bui-mask"),E&&c(i),I.length<1?(S.append(n).css("position","relative"),I=S.children(".bui-mask")):I.css("display","block"),x=!0,j=!0,w.call(this,"show"),L||r(i),this}}function s(){return N?void 0:(I=S.children(".bui-mask"),E?(u(),n.length<1&&I&&I.length&&(I&&I.remove(),I=null,j=!1)):(I&&I.remove(),I=null,S.css("position",y||"static"),x=!1),L=!1,w.call(this,"hide"),this)}function c(t){e.array.compare(D,n,"id")||n.push({id:D,opacity:t.opacity,callback:t.callback})}function u(e){n.pop()}function d(e){if(!N){var i=t.extend(!0,O,e);return I=S.children(".bui-mask"),I&&I.length?(I.css("display","block"),S.css("position","relative"),x=!0,j=!0,E&&c(i)):l(i),w.call(this,"show"),this}}function f(){return N?void 0:(I=S.children(".bui-mask"),E?(u(),n.length<1&&I&&I.length&&(I.css("display","none"),j=!1)):(I.css("display","none"),S.css("position","relative"),x=!1),w.call(this,"hide"),this)}function h(){return E?j:x}function p(e){s(),S&&n.length<1&&S.off("click.bui"),b("show"),b("hide"),N=!0}function g(t){var i={};return e.widget.call(i,t)}function v(t,i){return e.option.call(T,t,i)}function m(t,i){return e.on.apply(T,arguments),this}function b(t,i){return e.off.apply(T,arguments),this}function w(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var y,x,k={appendTo:"",opacity:.6,background:"",zIndex:100,autoTrigger:!1,autoClose:!1,callback:null},T={handle:{},on:m,off:b,add:l,hide:f,show:d,isShow:h,remove:s,destroy:p,widget:g,option:v,config:O,init:a},O=T.config=t.extend(!0,{},k,e.config.mask,i),C=t("body"),S=O.appendTo?t(O.appendTo):C,j=!1,I=S.children(".bui-mask"),E=S.is("body"),L=!1,N=!1,D=e.guid();return a(O),T}}(),e}(bui||{},libs),function(e,t){return e.loading=function(){var i=[];return function(n){function a(i){var n=t.extend(!0,I,i);P=!1,L=i.appendTo?t(i.appendTo):E,N=e.guid(),D=L.children(".bui-loading"),I=j.config=n,n.autoTrigger&&l(n);var a=n.callback;return n.callback=function(){n.autoClose&&d(),a&&a.call(this)},I.callback=n.callback,C=n.mask&&e.mask(n),this}function r(e){D=L.children(".bui-loading");var t=function(t){if(e.appendTo)e.callback&&e.callback.call(this,t);else{var n=i[i.length-1];n&&n.callback&&n.callback.call(this,t)}t.stopPropagation()};return L.on("click.bui",".bui-loading",t),F=!0,this}function o(t){t=t||{};var i=t.text,n=L.width(),a=i&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),r=-(n/2),o=-(a/2),l="block"==t.display?"":e.prefix("loading-inline"),s="";s+='<div id="'+N+'" class="'+e.prefix("loading")+" "+l+'" style="width:'+n+"px;height:"+a+"px;line-height:"+a+"px;margin-left:"+r+"px;margin-top:"+o+"px;"+(t.zIndex?"z-index:"+t.zIndex:"")+'" >',t.onlyText||(s+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),i&&(s+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>"),s+="</div>";var c=t&&t.template?t.template.call(this,t):s;return c}function l(e){if(!P){var i=t.extend(!0,I,e);if(D=L.children(".bui-loading"),O=D.children(".bui-loading-cell"),D&&D.hasClass("bui-loading-pause"))D&&D.removeClass("bui-loading-pause"),k.call(this,"start");else{""==i.appendTo&&g(i),D.length&&D.remove();var n=o(i);L.append(n),C&&C.add(i),k.call(this,"show")}return i.timeout&&(R&&clearTimeout(R),R=setTimeout(function(){d()},i.timeout)),F||r(i),this}}function s(e){if(!P){T=D&&D.children(".bui-loading-text");var t;return"undefined"==typeof e?t=T&&T.text():(T&&T.text(e),this)}}function c(){P||(O=D&&D.children(".bui-loading-cell"),O&&O.css("display","inline-block"),D&&D.removeClass("bui-loading-pause"))}function u(){P||(O=D&&D.children(".bui-loading-cell"),O&&O.css("display","none"),D&&D.addClass("bui-loading-pause"))}function d(){return P?void 0:(D=L.children(".bui-loading"),I.appendTo?(D&&D.remove(),D=null,C&&C.remove()):(v(),C&&C.remove(),i.length<1&&D&&D.length&&(D&&D.remove(),D=null)),F=!1,k.call(this,"remove"),k.call(this,"hide"),this)}function f(){return P?void 0:(D=L.children(".bui-loading"),D&&D.length&&(D.addClass("bui-loading-pause"),k.call(this,"pause")),this)}function h(e){if(!P){var i=t.extend(!0,I,e);return D=L.children(".bui-loading"),D&&D.length?(s(i.text),D.css("display","block"),C&&C.show(),""==i.appendTo&&g(I),k.call(this,"show")):l(i),I.timeout&&(R&&clearTimeout(R),R=setTimeout(function(e){p()},I.timeout)),this}}function p(){return P?void 0:(D=L.children(".bui-loading"),I.appendTo?(D.css("display","none"),C&&C.hide()):(v(),i.length<1&&D&&D.length&&(D.css("display","none"),C&&C.hide())),k.call(this,"hide"),this)}function g(t){!e.array.compare(N,i,"id")&&t.callback&&i.push({id:N,callback:t.callback})}function v(){i.pop()}function m(e){var e=1==e;d(),L&&i.length<1&&L.off("click.bui"),x("show"),x("hide"),x("start"),x("stop"),x("pause"),x("remove"),C&&C.destroy(e),P=!0}function b(t){var i={mask:C||{}};return e.widget.call(i,t)}function w(t,i){return e.option.call(j,t,i)}function y(t,i){return e.on.apply(j,arguments),this}function x(t,i){return e.off.apply(j,arguments),this}function k(t){j.self=this==window||this==j?null:this,e.trigger.apply(j,arguments)}var T,O,C,S={appendTo:"",width:20,height:20,text:"正在加载...",onlyText:!1,mask:!0,zIndex:"",autoTrigger:!1,autoClose:!0,timeout:0,display:"inline",template:null,callback:null},j={handle:{},on:y,off:x,start:l,stop:d,pause:f,text:s,showRing:c,hideRing:u,show:h,hide:p,destroy:m,widget:b,option:w,config:I,init:a},I=j.config=t.extend(!0,{},S,e.config.loading,n),E=t("body"),L=null,N="",D=null,F=!1,P=!1,R=null;return a(I),j}}(),e}(bui||{},libs),function(e,t){return e.slide=function(i){function n(i){var n=t.extend(!0,ne,i);return n.id?(P=e.obj(n.id),ne=ie.config=n,$=n.direction,n.height=parseFloat(n.height),n.width=parseFloat(n.width),K=window.viewport.width()||document.documentElement.clientWidth,Q=window.viewport.height()||document.documentElement.clientHeight,R=0==n.menu.indexOf("#")?e.obj(n.menu):P.find(n.menu).eq(0),M=R.children(),z=P.find(n.children).eq(0),H=z.parent(),A=z.children(),a(n),o(),Z=n.autoplay,Z&&p(),oe||(r(),ue=!0),re=re||n.index,parseInt(n.index)>0?h(n.index,"none"):h(re,"none"),this):void e.showLog("slide id不能为空","bui.slide.init")}function a(e){var t=P.parents(".bui-page"),i=(P.parents("main"),P[0]&&P[0].offsetTop||0),n=t.children(e.header),a=n.height(),r=t.children(e.footer),o=r.height();B=Q-(a||0)-(o||0)-i,_=0==e.height?B:e.height;var l="static"==R.parent().css("position")?R.css("position"):R.parent().css("position");J=P.find(e.menu).length?"absolute"==l||"fixed"==l?_:_-R.height():_,X=e.fullscreen?Q:0==e.height?J:e.height,Y=e.fullscreen?K:e.width||K,V=A.length,U=Y*V,W=X*V}function r(){var e=function(e){var i=t(this).hasClass("active"),n=t(this).index(),a=t(this).attr("disabled"),r=t(this).hasClass("disabled")||""==a||"true"==a||"disabled"==a;i||r||(ne.animate?h(n):h(n,"none"),y(n),Z&&p()),e.stopPropagation()};0==ne.menu.indexOf("#")?R.on("click.bui","li",e):P.on("click.bui",ne.menu+" li",e),P.on("click.bui",ne.prev,b),P.on("click.bui",ne.next,w);var i=ne.children+" "+ne.item;P.on("click.bui",i,function(e){F.call(this,"click",e),ne.callback&&ne.callback.call(this,e,ie)}),k(),ne.swipe||x(),oe=!0}function o(){de={x:{swipeDir:"swipeleft",swipeDir2:"swiperight",width:Y},y:{swipeDir:"swipeup",swipeDir2:"swipedown",width:X}},G={x:{parentInitKey:"width",parentInitValue:U,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+Y+"px;height:"+X+"px;"},y:{parentInitKey:"height",parentInitValue:W,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+Y+"px;height:"+X+"px;"}},z.parent()[G[$].parentInitKey](G[$].parentInitValue);var e,i=A.length;for(e=0;i>e;e++)ee=Boolean(A.eq(e).attr("data-scroll"))||ne.scroll,G[$].boxItemCSS=G[$].boxItemCSS+(ee?"overflow:auto;":"overflow:hidden;"),A[e].style.cssText=G[$].boxItemCSS;try{z[0].style.cssText=G[$].boxCss}catch(n){console.log("找不到$children[0],请检查下初始化是否在bui.ready里面,或者children参数是否正确.","bui.slide")}var a=ne.zoom?_/100+"rem":_+"px",r=ne.zoom?J/100+"rem":J+"px";ne.zoom?Y/100+"rem":Y+"px";if(ne.fullscreen?(t("main").css({position:"static"}),P.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":10,overflow:"hidden",width:Y,height:Q}),A.addClass(ne.alignClassName||"bui-box-center").css("height",Q)):(P.css({position:"relative",overflow:"hidden",width:Y,height:a}),A.addClass(ne.alignClassName).height(r)),ne.autoheight&&P.addClass("bui-slide-autoheight"),ne.autopage){var o=A.length,l=z.find(".active").index()+1,s=T(o,l);P.children(".bui-slide-head").remove(),P.append(s),M=P.find(ne.menu).eq(0).children()}}function l(t){var i=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches,n=he?i[0]:t;return ae.x1=n.pageX,ae.y1=n.pageY,ae.direction="",ne.stopHandle&&e.checkTargetInclude(t.target,ne.stopHandle)?void(ve=!1):(be=-re*Y,we=-re*X,i.length>1||t.scale&&1!==t.scale?void d("x"==$?be:we):(Z&&(g(),Z=!0),F.call(this,"touchstart",t,ae),ne.onStart&&ne.onStart.call(this,t,ae,ie),void(ve=!0)))}function s(i){var n=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches;if(n.length>1||i.scale&&1!==i.scale)return void d("x"==$?be:we);if(ve){var a=he?n[0]:i;ae.x2=a.pageX,ae.y2=a.pageY,ae.direction||(ae.direction=e.swipeDirection(ae.x1,ae.x2,ae.y1,ae.y2)),"swipeleft"!==ae.direction&&"swiperight"!==ae.direction||(i.preventDefault(),i.stopPropagation()),F.call(this,"touchmove",i,ae);try{if("y"==$&&ne.scroll){var r=t(i.target).closest(".active"),o=r[0].scrollTop||0,l=r[0].scrollHeight||0,s=r.height()||0;if("swipedown"===ae.direction&&o>1)return void(me=!1);if("swipeup"===ae.direction&&l-o-s>=2)return void(me=!1)}}catch(i){}deltaX=ae.x2-ae.x1,deltaY=ae.y2-ae.y1,de.x.move=be+deltaX,de.x.absDelta=Math.abs(deltaX),de.y.move=we+deltaY,de.y.absDelta=Math.abs(deltaY),ae.direction!==de[$].swipeDir&&ae.direction!==de[$].swipeDir2||(ne.delay&&de[$].absDelta>ne.distance&&d(de[$].move,"none"),ne.delay||(ne.bufferEffect?d(de[$].move,"none"):0==re&&V>1&&("swipeleft"==ae.direction||"swipeup"==ae.direction)?d(de[$].move,"none"):re==V-1&&V>1&&("swiperight"==ae.direction||"swipedown"==ae.direction)?d(de[$].move,"none"):re>0&&V-1>re&&V>1&&d(de[$].move,"none"),i.preventDefault()),ne.onMove&&ne.onMove.call(this,i,ae,ie)),me=!0}}function c(e){F.call(this,"touchend",e,ae),me&&(deltaX=ae.x2-ae.x1,deltaY=ae.y2-ae.y1,de.x.delta=be,de.x.absDelta=Math.abs(deltaX),de.y.delta=we,de.y.absDelta=Math.abs(deltaY),de[$].absDelta>ne.distance?(u.call(this,ae,de),ne.onEnd&&ne.onEnd.call(this,e,ae,ie)):de[$].absDelta<ne.distance&&d(de[$].delta),Z&&p(),"swipeleft"!=ae.direction&&"swiperight"!=ae.direction||e.stopPropagation(),pe+=ae.y2-ae.y1,ge+=ae.x2-ae.x1,ae.lastX=ge,ae.lastY=pe,ae={x1:0,x2:0,y1:0,y2:0,direction:""},ve=!1,me=!1)}function u(e,t){re=z.children(".active").index();var n;if(e.direction==t[$].swipeDir)if(re>=A.length-1)n=re,t[$].delta=-n*t[$].width,d(t[$].delta),re=n,y(n),F.call(this,"last",n);else if(n=re+1,t[$].delta=-n*t[$].width,d(t[$].delta),re=n,y(n),F.call(this,"next",n),i.autoload)O(re);else{var a=A.eq(re);F.call(a,"to",n)}else if(e.direction==t[$].swipeDir2)if(re>0)if(n=re-1,t[$].delta=-n*t[$].width,d(t[$].delta),re=n,y(n),F.call(this,"prev",n),i.autoload)O(re);else{var a=A.eq(re);F.call(a,"to",n)}else n=re,t[$].delta=-n*t[$].width,d(t[$].delta),re=n,y(n),F.call(this,"first",n)}function d(e,t){var i=ne.transition,t=t||"all "+i+"ms",e=e||0;switch($){case"x":f(e+"px",0,t,H);break;case"y":f(0,e+"px",t,H)}return this}function f(e,t,i,n){var a=t||0;"y"==$&&ne.zoom&&String(t).indexOf("%")<=-1&&(a=parseInt(t)/100+"rem");var i,n=n||P,e=e||0,r=e,o=String(e).indexOf("%")>-1?String(e):r,l=String(t).indexOf("%")>-1?String(t):a;i="number"==typeof i?"all "+i+"ms":i||"all 300ms";try{n.css({"-webkit-transition":i,transition:i,"-webkit-transform":"translate("+o+","+l+")",transform:"translate("+o+","+l+")"}),n.one("webkitTransitionEnd",function(){n.css({"-webkit-transition":"none",transition:"none"})})}catch(s){console.log(s.message)}}function h(e,n){var a=0;if("string"==typeof e&&e.indexOf(".html")>-1){var r=[];M.each(function(i,n){var o=t(n).attr("href")||void 0;r[i]=o,o==e&&(a=i)})}else a=parseInt(e);var o={x:{transform:-a*parseFloat(Y)},y:{transform:-a*parseFloat(X)}};if(a>=A.length||0>a)return!1;if(d(o[$].transform,n),re=a,y(a),Z&&p(),i.autoload)O(re);else{var l=A.eq(re);F.call(l,"to",a)}return this}function p(e){var e=e||ne.interval;g(),Z=!0;var t=re;q=setInterval(function(e){t>=0&&V-1>t?t+=1:t=0,h(t)},e),F.call(this,"play")}function g(e){if(q)try{window.clearInterval(q),Z=!1,F.call(this,"stop")}catch(t){}return this}function v(e){p(e)}function m(){return re}function b(){var e=re-1;return F.call(this,"prev",e),h(e),this}function w(){var e=re+1;return F.call(this,"next",e),h(e),this}function y(e){e=e||0,A.removeClass("active"),A.eq(e).addClass("active"),M.removeClass("active"),M.eq(e).addClass("active")}function x(){return P.off("touchstart",l).off("touchmove",s).off("touchend",c).off("touchcancel"),F.call(this,"lock"),this}function k(e){return P.on("touchstart",l).on("touchmove",s).on("touchend",c).on("touchcancel",function(){d("x"==$?be:we)}),F.call(this,"unlock"),this}function T(e,t){var i,n="",t=t||1;for(n+='<div class="bui-slide-head">',n+="<ul >",i=1;i<Number(e)+1;i++)n+="<li "+(i==t?'class="active"':"")+">"+i+"</li>";return n+="</ul >",n+="</div >"}function O(i){var n=A.eq(i),a=M.eq(i),r=a.attr("href")||"";return e.array.compare(i,se)?(F.call(n,"to",i,"200"),!1):void(r&&t.ajax({url:r,dataType:"html",async:ne.async,success:function(e,t){n.html(e),se.push(i),F.call(n,"load",i,t),!ue&&F.call(n,"to",i,t),ue=!1},error:function(e,t){F.call(n,"loadfail",i,t)}}))}function C(t){var i,n=e.guid(),t=t||1,a="";for(i=0;t>i;i++)a+='<li id="'+n+'" style="-webkit-box-flex:1;box-flex:1;width:'+Y+"px;height:"+X+'px;"></li>';z.append(a),A=z.children();var r=Y*A.length;V=A.length,H.width(r)}function S(i){var n={id:null,url:"",preload:!1,param:{},success:null,fail:null},a=t.extend(!0,{},n,i),r=a.url||"",o=null,l=A.length?re+1:0;if(a.id)o=e.obj(a.id);else{var s=A.eq(l);s.length?o=s:(C(),A=z.children(),o=A.eq(l))}if(r)if(re=l,ce[l]=a.param,r in le){var c="cache";e.array.compare(l,se)||(se.push(l),o.html(le[r]),a.success&&a.success.call(o,le[r],c),F.call(o,"load",le[r],c)),a.preload||h(l)}else t.ajax({url:r,success:function(t,i){t?(le[r]=t,e.array.compare(l,se)||(se.push(l),o.html(le[r]),a.success&&a.success.call(o,le[r],i),F.call(o,"load",t,i)),a.preload||h(l)):(a.fail&&a.fail.call(o,t,i),F.call(o,"loadfail",t,i))},error:function(e,t){a.fail&&a.fail.call(o,e,t),F.call(o,"loadfail",e,t)}});return this}function j(e){var e="number"==typeof e?e:re;return ce[e]||{}}function I(e){var e=1==e;g(),R&&(R.off("click.bui"),e&&R.remove()),P&&(P.off(),e&&P.remove()),D("stop"),D("play"),D("first"),D("last"),D("to")}function E(t){var i={};return e.widget.call(i,t)}function L(t,i){return e.option.call(ie,t,i)}function N(t,i){return e.on.apply(ie,arguments),this}function D(t,i){return e.off.apply(ie,arguments),this}function F(t){ie.self=this==window||this==ie?null:this,e.trigger.apply(ie,arguments)}var P,R,M,z,H,A,V,q,U,W,$,Y,X,B,_,J,K,Q,Z,G,ee,te={id:"",menu:".bui-slide-head ul",children:".bui-slide-main ul",header:"header",footer:"footer",item:"li",prev:".bui-slide-prev",next:".bui-slide-next",alignClassName:"",stopHandle:"",width:0,height:0,zoom:!1,transition:200,interval:5e3,swipe:!0,animate:!0,delay:!1,bufferEffect:!1,distance:80,direction:"x",autoplay:!1,autoheight:!1,scroll:!1,index:0,fullscreen:!1,autopage:!1,autoload:!1,async:!0,callback:null,onStart:null,onMove:null,onEnd:null},ie={handle:{},on:N,off:D,to:h,load:S,getPageParams:j,prev:b,next:w,stop:g,start:v,lock:x,index:m,unlock:k,destroy:I,widget:E,option:L,config:ne,init:n},ne=ie.config=t.extend(!0,{},te,e.config.slide,i),ae={},re=0,oe=!1,le={},se=[],ce=[],ue=!1,de={x:{},y:{}},fe=/hp-tablet/gi.test(navigator.appVersion),he="ontouchstart"in window&&!fe,$="",pe=0,ge=0,ve=!1,me=!1,ae={x1:0,x2:0,y1:0,y2:0,direction:""};n(ne);var be,we;return ie},e}(bui||{},libs),function(e,t){return e.swipe=function(){var i=null,n=null;return function(a){function r(n){var a=t.extend(!0,J,n);return he=!1,a.id?(M=e.obj(a.id),V=a.width>0?a.width:xe.clientWidth,q=a.height>0?a.height:xe.clientHeight,z=M.children(a.handle),H=Z?M.children():M,U=H.children(a.swipeleft),W=H.children(a.swiperight),$=H.children(a.swipeup),Y=H.children(a.swipedown),X=parseFloat(a.movingDistance),A=X,s(),G||(o(a),G=!0),i&&i.close(),ue||I(),this):void e.showLog("swipe id不能为空","bui.swipe.init")}function o(e){H.css({width:V,position:"relative",overflow:"hidden"}),!Z&&H.css({height:q}),z.css({position:"relative","z-index":10});try{var t=U.attr("data-moving")||X,i=W.attr("data-moving")||X,n=$.attr("data-moving")||X,a=Y.attr("data-moving")||X,r=l(t),o=l(i),s=l(n),c=l(a);te&&U.css({width:r}),ee&&W.css({width:o}),ne&&Y.css({height:s}),ie&&$.css({height:c})}catch(u){}}function l(e){var t=J.zoom?e/100+"rem":e+"px";return t}function s(){"x"==Q?(ee=!!W.length,te=!!U.length):"y"==Q?(ne=!!Y.length,ie=!!$.length):"xy"==Q&&(ne=!!Y.length,ie=!!$.length,te=!!U.length,ee=!!W.length)}function c(i){var n=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches;if(n.length>1||i.scale&&1!==i.scale)return void(me=!1);if(J.stopHandle&&e.checkTargetInclude(i.target,J.stopHandle))return void(me=!1);var a=ve?n[0]:i;K.id=J.id,K.x1=a.pageX,K.y1=a.pageY,K.direction="",$hasHandle=t(i.target).closest(J.handle);$hasHandle.height();if(R.call(this,"touchstart",i,K),Z&&!pe){z=$hasHandle,H=z.parent(),U=H.children(J.swipeleft),W=H.children(J.swiperight),$=H.children(J.swipeup),Y=H.children(J.swipedown),s();H.index();o(J),(0==J.height||""==H[0].style.height)&&H.height($hasHandle.height())}if(K.movingleft=parseInt(U.attr("data-moving")||X),K.movingright=parseInt(W.attr("data-moving")||X),K.movingup=parseInt($.attr("data-moving")||X),K.movingdown=parseInt(Y.attr("data-moving")||X),$hasHandle.length){var r=!1;switch(Q){case"x":r=!(!te&&!ee);break;case"y":r=!(!ie&&!ne);break;case"xy":r=!!(te||ee||ie||ne)}}me=void 0==r||1==r}function u(a){var r=a.originalEvent&&a.originalEvent.targetTouches||a.targetTouches;if(r.length>1||a.scale&&1!==a.scale)return void k();var o=ve?r[0]:a;if(K.x2=o.pageX,K.y2=o.pageY,R.call(this,"touchmove",a,K),i&&a.stopPropagation(),me){K.direction||(K.direction=e.swipeDirection(K.x1,K.x2,K.y1,K.y2)),"swipeleft"!==K.direction&&"swiperight"!==K.direction||a.preventDefault();try{if("swipeup"===K.direction||"swipedown"===K.direction){var l=M[0].scrollTop||0,s=(M[0].scrollHeight||0,$hasHandle[0].scrollTop||0),c=($hasHandle[0].scrollHeight||0,t(a.target)[0].scrollTop||0),u=t(a.target).height()||0,d=t(a.target)[0].scrollHeight||0,p=!1,g=!1;0==l&&0==s&&0==c&&(p=!0),2>=d-c-u&&(g=!0)}}catch(a){}var v="swiperight"==K.direction||"swipeleft"==K.direction?K.x2-K.x1:K.y2-K.y1,m=0;K.deltax=pe?Math.abs(v):Math.abs(v)+we,!ee||"swiperight"!=K.direction||re||pe||n?!p||!ne||"swipedown"!=K.direction||oe||pe||n?!te||"swipeleft"!=K.direction||ae||pe||n?!g||!ie||"swipeup"!=K.direction||le||pe||n?"swipeleft"==K.direction&&re?(A=K.movingright,m=f(K,K.movingright),ce&&E(-K.deltax,0,"none",n||W),se&&E(-m,0,"none",z),R.call(this,"movingleft",a,K),be=!0,a.stopPropagation()):"swipeup"==K.direction&&oe?(A=K.movingdown,m=f(K,K.movingdown),ce&&E(0,-K.deltax,"none",n||Y),se&&E(0,-m,"none",z),R.call(this,"movingup",a,K),be=!0,a.preventDefault(),a.stopPropagation()):"swiperight"==K.direction&&ae?(A=K.movingleft,m=f(K,K.movingleft),ce&&E(K.deltax,0,"none",n||U),se&&E(m,0,"none",z),R.call(this,"movingright",a,K),be=!0,a.stopPropagation()):"swipedown"==K.direction&&le&&(A=K.movingup,m=f(K,K.movingleft),ce&&E(0,K.deltax,"none",n||$),se&&E(0,m,"none",z),R.call(this,"movingdown",a,K),be=!0,a.preventDefault(),a.stopPropagation()):(A=K.movingup,m=h(K,K.movingup),ce&&E(0,m,"none",$),se&&E(0,-K.deltax,"none",z),R.call(this,"movingup",a,K),be=!0,a.preventDefault(),a.stopPropagation()):(A=K.movingleft,m=h(K,K.movingleft),ce&&E(m,0,"none",U),se&&E(-K.deltax,0,"none",z),R.call(this,"movingleft",a,K),be=!0,a.stopPropagation()):(A=K.movingdown,m=f(K,K.movingdown),ce&&E(0,m,"none",Y),se&&E(0,K.deltax,"none",z),R.call(this,"movingdown",a,K),be=!0,a.preventDefault(),a.stopPropagation()):(A=K.movingright,m=f(K,K.movingright),ce&&E(m,0,"none",W),se&&E(K.deltax,0,"none",z),R.call(this,"movingright",a,K),be=!0,a.stopPropagation())}}function d(e){if(R.call(this,"touchend",e,K),be){var t="swiperight"==K.direction||"swipeleft"==K.direction?Math.abs(K.x2-K.x1):Math.abs(K.y2-K.y1);ee&&"swiperight"==K.direction&&t>J.distance&&!re&&!pe?(g(),R.call(this,K.direction,e,K),R.call(this,"open",K.direction)):te&&"swipeleft"==K.direction&&t>J.distance&&!ae&&!pe?(p(),R.call(this,K.direction,e,K),R.call(this,"open",K.direction)):ie&&"swipeup"==K.direction&&t>J.distance&&!le&&!pe?(v(),R.call(this,K.direction,e,K),R.call(this,"open",K.direction)):ne&&"swipedown"==K.direction&&t>J.distance&&!oe&&!pe?(m(),R.call(this,K.direction,e,K),R.call(this,"open",K.direction)):pe&&t<J.distance?(te&&ae&&p(),ee&&re&&g(),ie&&le&&v(),ne&&oe&&m(),R.call(this,K.direction,e,K),J.alwaysTrigger&&R.call(this,"open",K.direction)):pe&&t>J.distance?(te&&ae&&w(),ee&&re&&b(),ie&&le&&y(),ne&&oe&&x(),R.call(this,K.direction,e,K),R.call(this,"close",K.direction)):!pe&&t<J.distance&&(te&&!ae&&w(),ee&&!re&&b(),ie&&!le&&y(),ne&&!oe&&x(),J.alwaysTrigger&&R.call(this,"close",K.direction),R.call(this,K.direction,e,K)),me=!1,be=!1,e.stopPropagation()}}function f(e,t){var i=-t+e.deltax;return i=i>0?0:i}function h(e,t){var i=t-e.deltax;return i=i>t?t:i}function p(e){e=e||{},e.transition=e.transition||J.transition,e.target=e.target||U,e.handle=e.handle||z,i&&i.close(),pe=!0,ae=!0,Z&&(i=_,n=U,xe.addEventListener("click",j,!0)),ce&&E(0,0,e.transition,e.target),se&&E(-A,0,e.transition,e.handle)}function g(e){e=e||{},e.transition=e.transition||J.transition,e.target=e.target||W,e.handle=e.handle||z,
i&&i.close(),pe=!0,re=!0,Z&&(i=_,n=W,xe.addEventListener("click",j,!0)),ce&&E(0,0,e.transition,e.target),se&&E(A,0,e.transition,e.handle)}function v(e){e=e||{},e.transition=e.transition||J.transition,e.target=e.target||$,e.handle=e.handle||z,i&&i.close(),pe=!0,le=!0,Z&&(i=_,n=$,xe.addEventListener("click",j,!0)),ce&&E(0,0,e.transition,e.target),se&&E(0,-A,e.transition,e.handle)}function m(e){e=e||{},e.transition=e.transition||J.transition,e.target=e.target||Y,e.handle=e.handle||z,i&&i.close(),pe=!0,oe=!0,Z&&(i=_,n=Y,xe.addEventListener("click",j,!0)),ce&&E(0,0,e.transition,e.target),se&&E(0,A,e.transition,e.handle)}function b(e){e=e||{},e.transition=e.transition||J.transition,e.target=de||W,e.handle=fe||z,pe=!1,re=!1,Z&&(i=null,n=null,de=null,fe=null,xe.removeEventListener("click",j,!0)),ce&&E(-(A+1),0,e.transition,e.target),se&&E(we,0,e.transition,e.handle)}function w(e){e=e||{},e.transition=e.transition||J.transition,e.target=de||U,e.handle=fe||z,pe=!1,ae=!1,Z&&(i=null,n=null,de=null,fe=null,xe.removeEventListener("click",j,!0)),ce&&E("101%",0,e.transition,e.target),se&&E(-we,0,e.transition,e.handle)}function y(e){e=e||{},e.transition=e.transition||J.transition,e.target=de||$,e.handle=fe||z,pe=!1,le=!1,Z&&(i=null,n=null,de=null,fe=null,xe.removeEventListener("click",j,!0)),ce&&E(0,"100%",e.transition,e.target),se&&E(0,-we,e.transition,e.handle)}function x(e){e=e||{},e.transition=e.transition||J.transition,e.target=de||Y,e.handle=fe||z,pe=!1,oe=!1,Z&&(i=null,n=null,de=null,fe=null,xe.removeEventListener("click",j,!0)),ce&&E(0,-A,e.transition,e.target),se&&E(0,we,e.transition,e.handle)}function k(){re&&b(),ae&&w(),oe&&x(),le&&y(),R.call(this,"close")}function T(){return he?void 0:(k(),this)}function O(e){if(!he){var t=e||{};t.transition=t.transition||J.transition,t.index=t.index||0;var i,n=t.target;switch(n){case"swiperight":t.target=W.eq(t.index),i=t.target.parent().index(),t.handle=Z?M.children().eq(i).children(J.handle):z,fe=t.handle,de=t.target,ee&&g(t);break;case"swipeleft":t.target=U.eq(t.index),i=t.target.parent().index(),t.handle=Z?M.children().eq(i).children(J.handle):z,fe=t.handle,de=t.target,te&&p(t);break;case"swipedown":t.target=Y.eq(t.index),i=t.target.parent().index(),t.handle=Z?M.children().eq(i).children(J.handle):z,fe=t.handle,de=t.target,ne&&m(t);break;case"swipeup":t.target=$.eq(t.index),i=t.target.parent().index(),t.handle=Z?M.children().eq(i).children(J.handle):z,fe=t.handle,de=t.target,ie&&v(t);break;default:t.target=W.eq(t.index),i=t.target.parent().index(),t.handle=Z?M.children().eq(i).children(J.handle):z,fe=t.handle,de=t.target,ee&&g(t)}return R.call(this,"open",n),this}}function C(){return i}function S(){return pe}function j(e){var n=t(e.target),a=n.closest(U).length||n.closest(W).length||n.closest($).length||n.closest(Y).length||e.target.className.indexOf("bui-mask")>-1||e.target.className.indexOf("bui-click")>-1;i&&(a||(i.close(),e.stopPropagation()))}function I(){M.on("touchstart",c).on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),ue=!0}function E(e,t,i,n){var i,a=n||M,e=e||0,t=t||0,r=J.zoom?parseFloat(e)/100+"rem":parseFloat(e)+"px",o=J.zoom?parseFloat(t)/100+"rem":parseFloat(t)+"px",l=String(e).indexOf("%")>-1?e:r,s=String(t).indexOf("%")>-1?t:o;return i="number"==typeof i?"all "+i+"ms":i||"all 300ms",a.css({"-webkit-transition":i,transition:i,"-webkit-transform":"translate("+l+","+s+")",transform:"translate("+l+","+s+")"}).one("webkitTransitionEnd",function(){a.css({"-webkit-transition":"none",transition:"none"})}),this}function L(){return he?void 0:(M.off("touchmove",u).off("touchend",d).off("touchcancel",function(){}),R.call(this,"lock"),this)}function N(){return he?void 0:(M.on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),R.call(this,"unlock"),this)}function D(e){var e=1==e;M&&(M.off(),e&&M.remove()),P("open"),P("close"),he=!0}function F(t,i){return e.on.apply(_,arguments),this}function P(t,i){return e.off.apply(_,arguments),this}function R(t){_.self=this==window||this==_?null:this,e.trigger.apply(_,arguments)}var M,z,H,A,V,q,U,W,$,Y,X,B={id:"",handle:".handle",swiperight:".swiperight",swipeleft:".swipeleft",swipeup:".swipeup",swipedown:".swipedown",direction:"x",stopHandle:"",hasChild:!1,handleMove:!0,targetMove:!0,alwaysTrigger:!1,width:0,height:0,movingDistance:280,initDistance:0,zoom:!1,distance:80,transition:300},_={handle:{},active:C,isActive:S,on:F,off:P,close:T,open:O,destroy:D,lock:L,unlock:N,init:r},J=_.config=t.extend(!0,{},B,e.config.swipe,a),K={},Q=J.direction,Z=J.hasChild,G=!1,ee=!1,te=!1,ie=!1,ne=!1,ae=!1,re=!1,oe=!1,le=!1,se=J.handleMove,ce=J.targetMove,ue=!1,de=null,fe=null,he=!1,pe=!1,ge=/hp-tablet/gi.test(navigator.appVersion),ve="ontouchstart"in window&&!ge,me=!1,be=!1,K={x1:0,x2:0,y1:0,y2:0,direction:"",deltax:0,movingleft:0,movingright:0,movingup:0,movingdown:0},we=J.initDistance,ye=document,xe=ye.documentElement;r(J);return _}}(),e}(bui||{},libs),function(e,t){return e.sidebar=function(i){function n(i){var n=t.extend(!0,y,i);return y=w.config=n,n.trigger&&(O=t(n.trigger)||e.obj(n.trigger)),$handle=e.obj(n.handle),m=bui.swipe({id:n.id,handle:n.handle,movingDistance:n.width,swiperight:n.swiperight,swipeleft:n.swipeleft,direction:"x",hasChild:!1,width:0,height:0,handleMove:n.handleMove,zoom:n.zoom,distance:n.distance,transition:300}),y.mask&&(x=bui.mask({appendTo:n.handle,autoTrigger:!1,opacity:.01,callback:function(){m.close()}})),T||(a(),n.height>0&&e.obj(n.id).height(n.height)),this}function a(){var e=this;m.on("open",function(t){O&&O.addClass("active"),x&&x.show(),$handle.css("overflow-y","hidden"),k=!0,v.call(e,"open",t)}),m.on("close",function(){O&&O.removeClass("active"),x&&x.hide(),$handle.css("overflow-y","auto"),k=!1,v.call(e,"close")}),O&&O.on("click.bui",function(){if(!t(this).hasClass("disabled")){var e=t(this).attr("data-target")||"swiperight";k?o():r({target:e})}}),T=!0}function r(e){var t=e||{};return t.target=t.target||"swiperight",t.transition=t.transition||300,m.open(t),this}function o(){return m.close(),this}function l(){return m.lock(),v.call(this,"lock"),this}function s(e){return m.unlock(),v.call(this,"unlock"),this}function c(){return k}function u(){return m.active()}function d(e){var e=1==e;O&&O.off("click.bui"),g("open"),g("close"),x&&x.destroy(e),m&&m.destroy(e)}function f(t){var i={swipe:m,mask:x};return e.widget.call(i,t)}function h(t,i){return e.option.call(w,t,i)}function p(t,i){return e.on.apply(w,arguments),this}function g(t,i){return e.off.apply(w,arguments),this}function v(t){w.self=this==window||this==w?null:this,e.trigger.apply(w,arguments)}var m,b={id:"",trigger:"",handle:".bui-page",swiperight:".swiperight",swipeleft:".swipeleft",handleMove:!0,mask:!0,width:280,height:0,zoom:!0,distance:80},w={handle:{},on:p,off:g,active:u,isActive:c,open:r,close:o,lock:l,unlock:s,destroy:d,widget:f,option:h,config:y,init:n},y=w.config=t.extend(!0,{},b,e.config.sidebar,i),x=null,k=!1,T=!1,O=null;return n(y),w},e}(bui||{},libs),function(e,t){return e.listview=function(i){function n(i){var n=t.extend(!0,k,i);return k=x.config=n,b=e.obj(n.id),w=b.children(),w.length&&a(n),T||r(n),this}function a(e){e.height>0&&b.height(e.height),e.data.length?w.each(function(i,n){var a=t(n),r=a.attr("status"),l=e.menuHeight>0?e.menuHeight:t(n).height();if(!r){var s=o(e);a.append(s).attr("status","1")}n.style.height||t(n).height(l)}):w.each(function(i,n){var a=e.menuHeight>0?e.menuHeight:t(n).height();n.style.height||t(n).height(a)})}function r(e){var t=this,i=function(t){e.callback&&e.callback.call(this,t,m)};b.on("click.bui",".bui-listview-menu .bui-btn",i),m=bui.swipe({id:e.id,handle:e.handle,movingDistance:e.menuWidth,swiperight:e.swiperight,swipeleft:e.swipeleft,direction:"x",hasChild:!0,width:e.width,height:0,zoom:k.zoom,distance:e.distance,transition:300}),m.on("open",function(e){O=!0,v.call(t,"open",e)}),m.on("close",function(e){O=!1,v.call(t,"close",e)}),T=!0}function o(e){var i="",n="right"==e.position?e.swipeleft.substr(1):e.swiperight.substr(1);return i+='<div class="bui-listview-menu '+n+'">',t.each(e.data,function(e,t){i+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"}),i+="</div>"}function l(){return m.active()}function s(e){var t=e||{};return t.target=t.target||("right"==k.position?k.swipeleft.substr(1):k.swiperight.substr(1)),t.transition=t.transition||300,t.index=t.index||0,m.open(t),this}function c(){return m.close(),this}function u(){return m.lock(),v.call(this,"lock"),this}function d(e){return m.unlock(),v.call(this,"unlock"),this}function f(e){var e=1==e;w&&(w.off("click.bui"),w=null),b&&(b.off("click.bui"),e&&b.remove(),b=null),g("open"),g("close"),m&&m.destroy(e),k=null,x=null}function h(t){var i={swipe:m};return e.widget.call(i,t)}function p(t,i){return e.option.call(x,t,i)}function g(t,i){return e.off.apply(x,arguments),this}function v(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var m,b,w,y={id:"",data:[],handle:".bui-btn",swiperight:".swiperight",swipeleft:".swipeleft",position:"right",width:0,height:0,menuWidth:160,menuHeight:0,distance:80,zoom:!1,callback:null},x={active:l,lock:u,unlock:d,open:s,close:c,destroy:f,widget:h,option:p,config:k,init:n},k=x.config=t.extend(!0,{},y,e.config.listview,i),T=!1,O=!1;return n(k),x},e}(bui||{},libs),function(e,t){"use strict";return e.btn=function(i){function n(t){return"object"===e["typeof"](t)?(d.id=t.id||"",d.handle=t.handle||"",d.progress="progress"in t?t.progress:!1,d.replace="replace"in t?t.replace:!1,d.timeout=t.timeout||3e3):"string"===e["typeof"](t)&&(d.id=t||"",d.handle="",d.progress=!1,d.replace=!1,d.timeout=3e3),l=e.obj(d.id),u=d.handle,s=d.progress,c=d.replace,this}function a(i,n){i=i,n=n;o();var a=0;l.on("click.bui",u,function(r){var o=i||t(this).attr("href"),l=t(this).attr("target"),u=t(this).attr("disabled"),f=t(this).hasClass("disabled")||""==u||"true"==u||"disabled"==u;if(o&&!f&&!(o&&o.indexOf("javascript:")>-1)){var h,p=t(this).attr("param")||"",g=p&&p.indexOf("{")>-1&&p.indexOf("}")>-1?JSON.parse(t(this).attr("param")):{},v=t.extend(!0,g,n),m=t(this).attr("progress")?"false"!=t(this).attr("progress"):s;m&&(h=e.loading({autoTrigger:!0,timeout:d.timeout}));var b=+new Date;if(350>b-a)return!1;a=b;var w={url:o,param:v,replace:c};return"_blank"==l?e.run({id:o,data:v}):e.load(w),!1}})}function r(i,n){var n=n||{};o(),l.on("click.bui",u,function(a){var r=this,o=t(r).css("background"),l="none"==o?"#fff":o;n.appendTo=r,n.background=n.background||l,n.autoClose=0!=n.autoClose,n.autoTrigger=0!=n.autoTrigger;var s=e.loading(n);return i&&i.call(r,s)})}function o(){return l.off("click.bui",u),this}var l,s,c,u,d={};return n(i),{load:a,submit:r,off:o}},e}(bui||{},libs),function(e,t){"use strict";return e.dialog=function(i){function n(i){var n=t.extend(!0,O,i);switch(F=!1,y=n.effect,n.position){case"top":C="bui-dialog-top",y=n.effect||"fadeInDown";break;case"bottom":C="bui-dialog-bottom",y=n.effect||"fadeInUp";break;case"left":C="bui-dialog-left",y=n.effect||"fadeInLeft";break;case"right":C="bui-dialog-right",y=n.effect||"fadeInRight";break;case"center":C="bui-dialog-center",y=n.effect||I}n.fullscreen&&(C="bui-dialog-fullscreen",y=n.effect||I,i.mask=!1),n.render?(n.id=e.guid(),d(n),b=e.obj(n.id)):(b=e.obj(n.id),b.addClass(C)),S=b.width()>N?N:b.width(),j=b.height()>D?D:b.height(),b.css("display","none"),w=e.toggle({id:n.id,effect:y});try{x=i.mask&&e.mask({opacity:i.opacity,appendTo:b.parent(),autoTrigger:!1,autoClose:!1,callback:function(){i.onMask&&i.onMask()}})}catch(a){console.log(a)}return E||f(),O=T.config=n,this}function a(e){var i="";return i+='<div id="'+e.id+'" class="bui-dialog '+C+" "+e.className+'" style="display:block">',e.title&&(i+='	<div class="bui-dialog-head">'+e.title+"</div>"),i+='	<div class="bui-dialog-main">',e.content&&(i+=e.content),i+="	</div>",e.buttons&&e.buttons.length&&(i+='	<div class="bui-dialog-foot bui-box">',t(e.buttons).each(function(e,t){i+='		<div class="bui-btn span1 '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>"}),i+="	</div>"),e.close&&(i+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),i+="</div>"}function r(t){if(!s&&!F){b.css("display","block");var i=b.attr("status")||0;if(0==i){S=O.width||S||b.width(),j=O.height||j||b.height();var n=e.unit.pxToRemZoom(S),a=e.unit.pxToRemZoom(j),r=O.zoom?n+"rem":S+"px",o=O.zoom?a+"rem":j+"px",c=O.zoom?"-"+a/2+"rem":"-"+j/2+"px",u=O.zoom?"-"+n/2+"rem":"-"+S/2+"px";if("center"!=O.position||O.fullscreen||b.css({width:r,height:o,top:"50%","margin-top":c,left:"50%","margin-left":u,right:"auto"}),O.fullscreen||b.css({width:r,height:o}),O.scroll){var d=b.children(".bui-dialog-head"),h=b.children(".bui-dialog-foot"),p=b.children(".bui-dialog-main"),g=d.length?d.height():0,v=h.length?h.height():0,m=b.height()-g-v;p.css({height:m})}b.attr("status","1")}return w.show(function(e){s=!0,t&&t.call(T,w)}),x&&x.show(),E||f(),l.call(this,"open",{target:b[0]}),this}}function o(e,t){"undefined"==typeof L[e]&&(L[e]=[]),L[e].push(t)}function l(e,t){if(L[e]instanceof Array)for(var i=L[e],n=0,a=i.length;a>n;n++)i[n](t)}function s(e){return s}function c(t){if(s&&!F){var t=t||O.onClose;try{w.hide(function(e){s=!1,t&&t.call(T,w)}),x&&x.hide(),l.call(this,"close",{target:b[0]})}catch(i){e.showLog(i,"bui.dialog.close")}return this}}function u(){try{b.remove(),l.call(this,"remove",{target:null})}catch(t){e.showLog(t,"bui.dialog.remove")}return this}function d(e){var i=a(e);return t(O.appendTo).append(i),this}function f(){return b.on("click.bui",".bui-dialog-close",function(e){O.onClose&&O.onClose.call(this,T),O.autoClose&&(O.render?c(u):c()),e.stopPropagation()}),b.on("click.bui",".bui-dialog-foot .bui-btn",function(e){O.callback&&O.callback.call(this,T),O.autoClose&&(O.render?c(u):c()),e.stopPropagation()}),E=!0,this}function h(e){return k.title="提示",k.content="",k.close=!1,k.render=!0,k.autoClose=!0,k.mask=!0,k.buttons=["确定"],O=t.extend(!0,k,e),n(O),l.call(this,"create",{target:null}),this}function p(e){var e=1==e;b&&(b.off("click.bui"),e&&b.remove()),m("open"),m("close"),x&&x.destroy(e),w&&w.destroy(e),F=!0}function g(t){var i={toggle:w,mask:x};return e.widget.call(i,t)}function v(t,i){return e.option.call(T,t,i)}function o(t,i){return e.on.apply(T,arguments),this}function m(t,i){return e.off.apply(T,arguments),this}function l(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var b,w,y,x,k={id:"",title:"",effect:"",content:"",className:"",appendTo:"body",position:"center",fullscreen:!1,width:0,height:0,mask:!0,opacity:.6,render:!1,autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,buttons:[],onMask:null,onClose:null,callback:null},T={handle:{},on:o,off:m,open:r,close:c,isOpen:s,create:h,remove:u,destroy:p,widget:g,option:v,config:O,init:n},O=T.config=t.extend(!1,{},k,e.config.dialog,i),C="",S="",j="",I="fadeInDown",s=!1,E=!1,L={},N=window.viewport.width()||document.documentElement.clientWidth,D=window.viewport.height()||document.documentElement.clientHeight,F=!1;return O.id&&n(O),T},e}(bui||{},libs),function(e,t){"use strict";return e.alert=function(i,n){var a=e.dialog(),r={};r.className="bui-alert",r.title="提示",r.width=400,r.height=260,r.scroll=!0,r.position="center",r.autoClose=!0,r.zoom=!0,r.buttons=[{name:"确定",className:"primary-reverse"}],r.callback=n||function(){};var o=t.extend(r,e.config.alert);if("string"==typeof i&&i.indexOf("<")>-1&&i.indexOf(">")>-1)o.content="<xmp>"+i+"</xmp>";else if("object"==typeof i)try{var l=JSON.stringify(i);o.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}catch(s){e.showLog("数据格式错误,请检查下对象是不是JSON?","bui.alert")}else{var l=i;o.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}return a.create(o).open(),a},e}(bui||{},libs),function(e,t){"use strict";return e.confirm=function(i,n){var a=e.dialog(),r={};r.className="bui-confirm",r.title="提示",r.width=400,r.height=260,r.scroll=!0,r.autoClose=!0,r.zoom=!0,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=n||function(){};var o={};return"object"==typeof i?(i.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+i.content+"</div>",o=t.extend(r,e.config.confirm,i)):(o=t.extend(r,e.config.confirm),o.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+i+"</div>",o.callback=n||function(){}),a.create(o).open(),a},e}(bui||{},libs),function(e,t){"use strict";return e.prompt=function(i,n){var a=e.dialog(),r={};r.className="bui-prompt",r.title="",r.width=400,r.height=260,r.scroll=!0,r.autoClose=!1,r.zoom=!0,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=n||function(){},r.placeholder="",r.row=1,r.type="text",r.value="",r.onChange=null;var o={},l="",s="";switch("object"==typeof i?(o=t.extend(r,e.config.prompt,i),l=o.content||""):(o=t.extend(r,e.config.prompt),o.callback=n||function(){},l=i||""),o.type){case"number":o.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+l+'</div> <div class="span1"> <input class="bui-prompt-text" placeholder="'+o.placeholder+'" type="'+o.type+'" value="'+o.value+'"/> </div> </div>';break;default:o.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+l+'</div> <div class="span1"> <textarea class="bui-prompt-text" placeholder="'+o.placeholder+'" rows="'+o.row+'" >'+o.value+"</textarea> </div> </div>"}return a.create(o).open(),t("#"+a.config.id).on("change",".bui-prompt-text",function(){s=this.value,o.onChange&&o.onChange.call(this,a)}),a.value=function(e){return"undefined"==typeof e?s:(t("#"+a.config.id).find(".bui-prompt-text").val(e),s=e)},a.focus=function(e){t("#"+a.config.id).find(".bui-prompt-text").focus()},a},e}(bui||{},libs),function(e,t){"use strict";return e.hint=function(i,n){function a(i){var n=t.extend(!0,T,i);return y=e.guid(),S="top"===n.position?"fadeInDown":"bottom"===n.position?"fadeInUp":n.effect,T=k.config=n,o(y,n.content,O,n.appendTo),++O,w=e.toggle({id:"#"+y,effect:S}),j=!0,w.show(),C=e.obj(y),n.autoClose&&(x&&clearTimeout(x),x=setTimeout(function(e){n.onClose&&n.onClose.call(k),s()},n.timeout)),I||r(n),this}function r(t){e.obj(y).on("click.bui",".bui-hint-close",function(e){s(),t.onClose&&t.onClose.call(this,k)}),I=!0}function o(i,n,a,r){var o,l="11"+a,s=e.obj(r)||t("body");switch(T.position){case"top":o="bui-hint-top";break;case"bottom":o="bui-hint-bottom";break;case"center":o="bui-hint-center"}var c=T.background?T.background:"rgba(0,0,0,"+T.opacity+")",u='<div id="'+i+'" class="bui-hint '+o+'" style="background:'+c+";z-index:"+l+'">'+n+(T.autoClose?"":'<div class="bui-hint-close"><i class="icon-close"></i></div>')+"</div>";s.append(u),r&&s.css("position","relative")}function l(){return j}function s(){var e=this;return w&&(j=!1,w.hide(function(){v.call(e,"hide",{target:null}),w.remove(),w=null})),this}function c(e){var t=this;return w&&(j=!1,w.hide(function(i){e&&e.call(this,k),v.call(t,"hide",{target:C[0]})})),this}function u(e){var t=this;return w&&(j=!0,w.show(function(i){v.call(t,"show",{target:C[0]}),e&&e.call(this,k)})),this}function d(t){var t=1==t;e.obj(y).off("click.bui"),w&&w.destroy(t),g("show"),g("hide")}function f(t){var i={toggle:w};return e.widget.call(i,t)}function h(t,i){return e.option.call(k,t,i)}function p(t,i){return e.on.apply(k,arguments),this}function g(t,i){return e.off.apply(k,arguments),this}function v(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var m={appendTo:"",content:"",timeout:2e3,autoClose:!0,opacity:.6,background:"",effect:"fadeInUp",position:"bottom",onClose:null};if("number"==typeof i||"string"==typeof i){var b=i||"";i={},i.content=b,i.onClose=n||null}else"object"==typeof i&&i.content&&(i=i);var w,y,x,k={handle:{},on:p,off:g,remove:s,hide:c,show:u,isShow:l,destroy:d,widget:f,option:h,config:T,init:a},T=k.config=t.extend(!0,{},m,e.config.hint,i),O=0,C=null,S="",j=!1,I=!1;return T.content&&a(T),k},e}(bui||{},libs),function(e,t){return e.pullrefresh=function(i){function n(i){var n=t.extend(!0,z,i);return n.id?(O=e.obj(n.id),z=M.config=n,C=O[0],S=O.children(D),j=O.children(F),I=O.children(P),L=a,E=n.refreshTips.end,N=e.loading({appendTo:S,width:20,height:20,autoClose:!1,text:E,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1}),n.autoLoad&&(V=!0,N.start({text:n.refreshTips.start,onlyText:!1}),L()),q||o(n),m(n.height),this):void e.hint("pullrefresh id不能为空")}function a(){A=(new Date).getTime(),z.onRefresh&&z.onRefresh.call(M),T.call(this,"refresh")}function r(){var e,t=(new Date).getTime(),i=t-A,n=1e3,a=60*n,r=60*a,o=Math.floor(i/r),l=Math.floor(i/a);Math.floor(i/n);return e=0>=o&&0>=l?"刚刚更新":0>=o&&l>0?l+"分钟前更新":"上次更新时间:"+(10>o?"0"+o:o)+":"+(10>l?"0"+l:l)}function o(e){H||d(),q=!0}function l(i){var n=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches,a=$?n[0]:i;return J.x1=a.pageX,J.y1=a.pageY,J.direction="",z.stopHandle&&e.checkTargetInclude(i.target,z.stopHandle)?void(B=!1):n.length>1||i.scale&&1!==i.scale?void(B=!1):(E=z.lastUpdated?r():z.refreshTips.end,T.call(this,"touchstart",i,J),void(B=!(!(t(window).scrollTop()<=0&&O.scrollTop()<=0&&z.onRefresh)||V)))}function s(t){var i=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(B){if(i.length>1||t.scale&&1!==t.scale)return void h();if(!B)return void h();var n=$?i[0]:t;J.x2=n.pageX,J.y2=n.pageY,J.direction||(J.direction=e.swipeDirection(J.x1,J.x2,J.y1,J.y2)),T.call(this,"touchmove",t,J),"swipeleft"!==J.direction&&"swiperight"!==J.direction||t.preventDefault(),"swipedown"==J.direction?(T.call(this,"movingdown",t,J),moveY=Math.abs(J.y2-J.y1),h(moveY/2,!1),moveY>=z.distance?K||(N.show({text:z.refreshTips.release,onlyText:!1}).pause(),K=!0):Q||(N.show({text:E,onlyText:!1}).pause(),Q=!0),_=!0,z.maxDistance>z.distance&&moveY>=z.maxDistance&&(N.show({text:z.refreshTips.start,onlyText:!1}).start(),V=!0,z.onRefresh&&L(),_=!1,K=!1,Q=!1,J={},Y+=J.y2-J.y1,X+=J.x2-J.x1,J.lastX=X,J.lastY=Y,J={x1:0,x2:0,y1:0,y2:0,direction:""},B=!1,_=!1),t.preventDefault(),t.stopPropagation()):"swipeup"==J.direction&&(T.call(this,"movingup",t,J),_=!0)}}function c(e){return T.call(this,"touchend",e,J),_?("swipedown"==J.direction?(T.call(this,J.direction,e,J),moveY>=z.distance?(h(z.distance/2),N.show({text:z.refreshTips.start,onlyText:!1}).start(),V=!0,z.onRefresh&&L()):h(),e.stopPropagation(),K=!1,Q=!1,J={}):"swipeup"==J.direction&&T.call(this,J.direction,e,J),Y+=J.y2-J.y1,X+=J.x2-J.x1,J.lastX=X,J.lastY=Y,J={x1:0,x2:0,y1:0,y2:0,direction:""},B=!1,void(_=!1)):(J={x1:0,x2:0,y1:0,y2:0,direction:""},B=!1,void(_=!1))}function u(e){return H=!0,O.off("touchstart",l).off("touchmove",s).off("touchend",c).off("touchcancel",h),h(),e&&e.call(this,M),T.call(this,"lock"),this}function d(e){return H=!1,O.on("touchstart",l).on("touchmove",s).on("touchend",c).on("touchcancel",h),e&&e.call(this,M),T.call(this,"unlock"),this}function f(e,t,i){return U||(N.show({text:z.refreshTips.success,onlyText:!1}),h(e,t),j.one("webkitTransitionEnd",function(){N&&N.hide(),U=!1,i&&i.call(M)})),this}function h(e,t){t=0!=t,e=e||0,V=!1;var i=t?"all 300ms ease-out":"none";return p(0,e+"px",i,j),I.length&&p(0,e+"px",i,I),this}function p(e,t,i,n){var i,n=n||O,e=e||0,t=t||0,a=e,r=t,o=String(e).indexOf("%")>-1?String(e):a,l=String(t).indexOf("%")>-1?String(t):r;i="number"==typeof i?"all "+i+"ms":i||"all 300ms";try{n.css({"-webkit-transition":i,transition:i,"-webkit-transform":"translate("+o+","+l+")",transform:"translate("+o+","+l+")"}),n.one("webkitTransitionEnd",function(){n.css({"-webkit-transition":"none",transition:"none"})})}catch(s){console.log(s.message)}}function g(){U=!0,h(),e.hint(z.refreshTips.fail),T.call(this,"fail")}function v(){h(z.distance/2,!0),N.start({text:z.refreshTips.start,onlyText:!1}),z.onRefresh&&L()}function m(e){var i=(O.parents("main"),C&&C.offsetTop||0),n=t(z.header),a=n.length>1?n.eq(n.length-1).height():n.height(),r=t(z.footer),o=r.length>1?r.eq(r.length-1).height():r.height(),l=window.viewport.height()-(a||0)-(o||0)-i,s=e?parseFloat(e):l;O.height(s)}function b(e){var e=1==e;O&&(O.off(),e&&O.remove()),N&&N.destroy(e),k("refresh"),k("movingdown"),k("swipedown")}function w(t){var i={loading:N};return e.widget.call(i,t)}function y(t,i){return e.option.call(M,t,i)}function x(t,i){return e.on.apply(M,arguments),this}function k(t,i){return e.off.apply(M,arguments),this}function T(t){M.self=this==window||this==M?null:this,e.trigger.apply(M,arguments)}var O,C,S,j,I,E,L,N,D="."+e.prefix("scroll-head"),F="."+e.prefix("scroll-main"),P="."+e.prefix("scroll-foot"),R={id:"",stopHandle:"",childrenTop:D,childrenMain:F,header:".bui-page header",footer:".bui-page footer",distance:90,maxDistance:0,autoLoad:!0,lastUpdated:!1,height:0,refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"刷新失败,请检查下网络再试试",success:"刷新成功"},onRefresh:null},M={handle:{},on:x,off:k,reverse:f,refresh:v,setHeight:m,fail:g,lock:u,unlock:d,destroy:b,widget:w,option:y,config:z,init:n},z=M.config=t.extend(!0,{},R,e.config.pullrefresh,i),H=!1,A=(new Date).getTime(),V=!1,q=!1,U=!1,W=/hp-tablet/gi.test(navigator.appVersion),$="ontouchstart"in window&&!W,Y=0,X=0,B=!1,_=!1,J={x1:0,x2:0,y1:0,y2:0,direction:""};n(z);var K=!1,Q=!1;return M},e}(bui||{},libs),function(e,t){return e.scroll=function(i){function n(i){var n=t.extend(!0,B,i);if(D=t(window),!n.id)return void e.hint("scroll id不能为空");L=e.obj(n.id),ie=n.page,ne=n.pageSize,B=X.config=n,Z=!0,G=!0,ee=!1,te=!1,N=L[0],P=L.children(U),M=L.children(W),R=L.children($),M.css({position:"relative"}),A=e.loading({appendTo:R,width:20,height:20,autoClose:!1,text:n.scrollTips.start,display:"inline",autoTrigger:!1,mask:!1}),z=l,H=o,V?V.init({id:n.id,onRefresh:z,distance:n.distance,maxDistance:n.maxDistance,lastUpdated:n.lastUpdated,height:n.height,refreshTips:n.refreshTips,autoLoad:n.autoRefresh}):n.refresh&&n.onRefresh?(V=e.pullrefresh({id:n.id,onRefresh:z,distance:n.distance,stopHandle:n.stopHandle,maxDistance:n.maxDistance,lastUpdated:n.lastUpdated,header:n.header,footer:n.footer,height:n.height,refreshTips:n.refreshTips,autoLoad:n.autoRefresh}),V.lock(),K=!0):m(n.height);try{H&&H.call(X,ie,ne)}catch(r){e.showLog(r,"bui.scroll.init")}return ae||a(n),this}function a(t){L.on("scroll",e.unit.debounce(r,t.delayTime)),ae=!0}function r(e){var t=e.target,i=t.scrollTop||0;0==i?E.call(this,"scrolltop",e):t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-B.endDistance)&&B.onLoad&&(B.page=X.config.page=++ie,B.autoScroll&&H&&H.call(X,B.page,ne),E.call(this,"scrollbottom",e)),E.call(this,"scrollend",e),B.onScrolling&&B.onScrolling.call(this,e,X)}function o(e,t){return Q=!0,te=!1,G&&!ee&&(B.page=X.config.page=e,B.onLoad&&A&&A.start({text:B.scrollTips.start,onlyText:!1}),B.onLoad&&B.onLoad.call(X,e,t)),K&&B.refresh&&V&&V.unlock(),this}function l(){Q=!0,G=!0,ee=!1,Z=!1,te=!0,ie=_,ne=B.pageSize,re={},A&&A.start({text:B.scrollTips.end,onlyText:!0}),B.page=X.config.page=ie,E.call(this,"refresh",ie),B.onRefresh&&B.onRefresh.call(X,ie,ne)}function s(t,i,n){var n=0!=n;return i&&"array"==e["typeof"](i)?(i=i,Q=!1,oe&&clearTimeout(oe),void(oe=setTimeout(function(){var e=parseInt(L.height()),a=parseInt(L.find(B.childrenMain)[0]&&L.find(B.childrenMain)[0].scrollHeight);if(n)if(i&&i.length>ne-1){if(G=!0,ee=!1,Z=!1,A&&A.start({text:B.scrollTips.end,onlyText:!0}),a>=10&&e>a&&B.autoNext&&B.onLoad){var r=++ie;H&&H.call(X,r,ne)}E.call(this,"loadpage",i,ie)}else{G=!1,ee=!0;var o=Z&&i.length<1?B.scrollTips.nodata:B.scrollTips.last;A&&A.start({text:o,onlyText:!0}),E.call(this,"loadpage",i,ie),E.call(this,"lastpage",i,ie)}else G=!1,ee=!0,A&&A.stop();return re[t]=i},10))):(e.showLog("scroll 控件的updatePage 第2个参数,必须是一个数组,如果是list控件,检测field的data映射是否准确","bui.scroll.updatePage"),void(i=[]))}function c(e){return V&&V.reverse(),e&&e.call(X,V),this}function u(){return te}function d(e){return re}function f(e){re={}}function h(e,t){return J=!0,K=!0,A.show({text:B.scrollTips.fail,onlyText:!0,callback:function(i){o(e,t)}}),V&&V.lock(),this}function p(t,i){var n,a,r=[];if(t&&i)for(n in re){var o=e.array.filter(t,re[n],i);if(o.length)for(a in o)r.push(o[a])}return r}function g(e,t){var e=e||0;F=L.find(B.children).children(B.handle);var i=L.height(),n=parseFloat(F.height()),a=N.scrollHeight,r=n*parseInt(e)-n;return a>i&&(N.scrollTop=r,E.call(this,"to",e),t&&t.call(X,parseInt(e))),this}function v(e){var i=0;return i="object"==typeof e?t(e)[0].offsetTop:"string"==typeof e&&e.indexOf("#")>-1?t(e)[0].offsetTop:parseInt(e)||0,N.scrollTop=i,this}function m(e){var i=(L.parents("main"),N&&N.offsetTop||0),n=t(B.header),a=n.length>1?n.eq(n.length-1).height():n.height(),r=t(B.footer),o=r.length>1?r.eq(r.length-1).height():r.height(),l=window.viewport.height()-(a||0)-(o||0)-i,s=e?parseFloat(e):l;L.height(s)}function b(){return L.off("scroll",e.unit.debounce(r,B.delayTime)),E.call(this,"lock"),this}function w(t){return L.on("scroll",e.unit.debounce(r,B.delayTime)),E.call(this,"unlock"),this}function y(){return g(1),V&&V.refresh(),this}function x(e){var e=e||ie;return ie=e,H&&H.call(X,ie,ne),this}function k(){return H&&H.call(X,++ie,ne),this}function T(){return ie-- >0&&H&&H.call(X,ie--,ne),this}function O(e){var e=1==e;L&&(L.off("scroll"),e&&L.remove()),V&&V.destroy(e),A&&A.destroy(e),I("loadpage"),I("lastpage"),I("scrolltop"),I("scrollbottom"),I("scrollend")}function C(t){var i={pullrefresh:V,loading:A};return e.widget.call(i,t)}function S(t,i){return e.option.call(X,t,i)}function j(t,i){return e.on.apply(X,arguments),this}function I(t,i){return e.off.apply(X,arguments),this}function E(t){X.self=this==window||this==X?null:this,e.trigger.apply(X,arguments)}var L,N,D,F,P,R,M,z,H,A,V,q="."+e.prefix("list"),U="."+e.prefix("scroll-head"),W="."+e.prefix("scroll-main"),$="."+e.prefix("scroll-foot"),Y={id:"",childrenTop:U,childrenMain:W,childrenBottom:$,children:q,stopHandle:"",header:".bui-page header",footer:".bui-page footer",handle:"li",distance:100,endDistance:1,height:0,page:1,pageSize:10,lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,delayTime:100,scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},onScrolling:null,onRefresh:null,onLoad:null},X={handle:{},on:j,off:I,reverse:c,updateCache:s,updatePage:s,getCache:d,clearCache:f,fail:h,filter:p,to:g,scrollTop:v,lock:b,unlock:w,refresh:y,load:x,nextPage:k,prevPage:T,setHeight:m,isRefresh:u,destroy:O,widget:C,option:S,config:B,init:n},B=X.config=t.extend(!0,{},Y,e.config.scroll,i),_=B.page,J=!1,K=!1,Q=!1,J=!1,Z=!0,G=!0,ee=!1,te=!1,ie=B.page,ne=B.pageSize,ae=!1,re={};n(B);var oe;return X},e}(bui||{},libs),function(e,t){return e.list=function(i){function n(i){var n=t.extend(!0,O,i);m=e.obj(n.id),O=T.config=n,S=O.data;var o=0==O.refresh?null:l;return O.url?(x?x.init({id:n.id,children:n.children,handle:n.handle,page:n.page,pageSize:n.pageSize,distance:n.distance,maxDistance:n.maxDistance,height:n.height,refresh:n.refresh,autoNext:n.autoNext,autoScroll:n.autoScroll,scrollTips:n.scrollTips,refreshTips:n.refreshTips,lastUpdated:n.lastUpdated,onRefresh:o,onLoad:r}):x=bui.scroll({id:n.id,children:n.children,handle:n.handle,header:n.header,footer:n.footer,page:n.page,pageSize:n.pageSize,distance:n.distance,stopHandle:n.stopHandle,maxDistance:n.maxDistance,height:n.height,refresh:n.refresh,autoNext:n.autoNext,autoScroll:n.autoScroll,scrollTips:n.scrollTips,refreshTips:n.refreshTips,lastUpdated:n.lastUpdated,onRefresh:o,onLoad:r}),b=m.find(n.children),w=b.children(n.handle),j||a(n),this):void 0}function a(e){return e.callback&&m.on("click",e.handle,function(t){e.callback.call(this,t,T,x)}),j=!0,this}function r(n,a,r){var l=this,s=r||O.commandLoad,c=[],u=[];return S=t.extend(!0,{},I,O.data,S),O&&O.field&&O.field.page&&O.field.page.indexOf(".")>-1?(c=O.field.page.split("."),S[c[0]]=S[c[0]]||{},S[c[0]][c[1]]=n):S[O.field.page]=n,O&&O.field&&O.field.size&&O.field.size.indexOf(".")>-1?(u=O.field.size.split("."),S[u[0]]=S[u[0]]||{},S[u[0]][u[1]]=a):S[O.field.size]=a,
O.page=T.config.page=n,y=e.ajax({url:O.url,data:S,method:O.method,headers:O.headers,dataType:O.dataType,contentType:O.contentType,timeout:O.timeout,"native":O["native"]}).done(function(e,t,a){var r,c;r="string"==typeof e?e&&JSON.parse(e)||{}:e||{},c=O&&O.field&&""==O.field.data?r||[]:o(O.field.data,r);var u=i.template&&i.template(c,r,n)||"";i.template&&b[s](u);var d=x.isRefresh();v.call(l,"success",e,n,a);try{d?(O.onRefresh&&O.onRefresh.call(T,x,r,a),v.call(l,"refresh",e,n,a),O.refresh&&x.reverse()):O.onLoad&&O.onLoad.call(T,x,r,a),x&&x.updatePage(n,c)}catch(f){}}).fail(function(e,t,i){v.call(l,"fail",e,n,i),O.onFail&&O.onFail.call(T,t,x,n,i),x&&x.fail(n,a,e)}),this}function o(e,t){function i(e){var t,n=e[a[r]],o=a[r+1];return t="string"==typeof n?JSON.parse(n):n||[],o&&o in t?(r++,i(t)):(r=0,t)}var n,a=[];e&&e.indexOf(".")>-1?a=e.split("."):a.push(e);var r=0;return n=i(t)}function l(){var e=C,t=O.pageSize;return v.call(this,"refreshbefore"),r(e,t,O.commandRefresh),this}function s(){return v.call(this,"refreshbefore"),x.refresh(),this}function c(i,n){var a;if("string"==typeof n)try{a=JSON.parse(n)}catch(r){return void e.showLog("data 参数必须为对象","bui.list.modifyData")}else a=n;return S=t.extend(!0,{},I,a)}function u(e){var e=1==e;m&&(m.off("click.bui"),e&&m.remove(),m=null),g("refreshbefore"),g("refresh"),g("success"),g("fail"),x&&x.destroy(e)}function d(t){var i={scroll:x,ajax:y};return e.widget.call(i,t)}function f(t,i){return"data"==t&&"undefined"!=typeof i?c(t,i):e.option.call(T,t,i)}function h(e){return O=T.config=t.extend(!0,{},T.config,e),S=O.data,this}function p(t,i){return e.on.apply(T,arguments),this}function g(t,i){return e.off.apply(T,arguments),this}function v(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var m,b,w,y,x,k={id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:"",timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},lastUpdated:!1,page:1,pageSize:10,autoNext:!0,autoScroll:!0,"native":!0,refresh:!0,stopHandle:"",children:".bui-list",handle:".bui-btn",header:".bui-page header",footer:".bui-page footer",height:0,commandRefresh:"html",commandLoad:"append",template:null,onRefresh:null,onLoad:null,onFail:null,callback:null},T={handle:{},on:p,off:g,refresh:s,modify:h,destroy:u,widget:d,option:f,config:O,init:n},O=T.config=t.extend(!0,{},k,e.config.list,i),C=O.page,S={},j=!1,I=O.data;return n(O),T},e}(bui||{},libs),function(e,t){return e.searchbar=function(i){function n(i){var n=t.extend(!0,b,i);return f=e.obj(n.id),b=m.config=n,p=f.find("input"),f.find(n.handleRemove).length>0?g:p.after('<i class="'+n.handleRemove.substr(1)+'"></i>'),g=f.find(n.handleRemove),g.hide(),w||a(n),this}function a(i){return f.on("click.bui",i.handle,function(e){document.activeElement.blur();var t=p.val();h=t,d.call(this,"search",t),i.callback&&i.callback.call(this,m,t)}),f.on("click.bui",i.handleRemove,function(){document.activeElement.blur(),p.val("");var e=p.val();h=e,t(this).hide(),d.call(this,"remove",e),i.onRemove&&i.onRemove.call(this,m,e)}),f.on("input","input",e.unit.debounce(function(){var e=p.val();h=e,e?g.show():g.hide(),d.call(this,"input",e),i.onInput&&i.onInput.call(this,m,e)},i.delayTime)),w=!0,this}function r(e){return e=e||h,d.call(this,"search",e),b.callback&&b.callback.call(this,m,e),this}function o(e){var e=1==e;f&&(f.off(),e&&f.remove()),u("search"),u("remove"),u("input")}function l(t){var i={};return e.widget.call(i,t)}function s(t,i){return e.option.call(m,t,i)}function c(t,i){return e.on.apply(m,arguments),this}function u(t,i){return e.off.apply(m,arguments),this}function d(t){m.self=this==window||this==m?null:this,e.trigger.apply(m,arguments)}var f,h,p,g,v={id:"",handle:".icon-search,.btn-search",handleRemove:".icon-remove",delayTime:400,onInput:null,onRemove:null,callback:null},m={handle:{},on:c,off:u,search:r,destroy:o,widget:l,option:s,config:b,init:n},b=m.config=t.extend(!0,{},v,e.config.searchbar,i),w=!1;return n(b),m},e}(bui||{},libs),function(e,t){"use strict";return e.select=function(i){function n(i){var n=t.extend(!0,F,i);if(j=[],I=[],P=n.id?e.obj(n.id).attr("id"):P,F=D.config=n,n.data.length)var l=o(n.data);if(n.popup)if(L)L.close(),O.find(".bui-dialog-main").html(l);else{if(n.id)O=e.obj(n.id);else{var c=r();t(n.appendTo).append(c),O=e.obj(P),O.find(".bui-dialog-main").html(l)}L=e.dialog({id:P,effect:n.effect,mask:n.mask,position:n.position,autoClose:!1,height:n.height,width:n.width,zoom:!1,fullscreen:n.fullscreen,onMask:function(e){s()}})}else{if(!n.id)return void e.hint("select id 必须有");O=e.obj(n.id),n.data.length&&O.html(l)}return E=O.find(n.handle),R||a(n),this}function a(i){i.trigger&&(T=e.obj(i.trigger),S=T.find(i.triggerChildren).length?T.find(i.triggerChildren):T,C=i.title||t.trim(S.html()),i.title&&S.html(i.title),T.on("click.bui",function(e){t(this).hasClass("disabled")||l()})),y("change",function(){var n=t(this),a=n.val(),r=n.attr("text"),o=n.is(":checked");switch(i.type){case"radio":j=[],I=[],j.push(r),I.push(a),c(a||""),u(r||C||"");break;case"select":j=[],I=[],j.push(r),I.push(a),c(a||""),u(r||C||"");break;case"checkbox":var l=O.attr("value"),s=O.attr("text");if(l&&l.indexOf(",")>-1)try{I=l.split(","),j=s&&s.split(",")||[]}catch(d){}o?(j.push(r),I.push(a)):(e.removeArray(a,I),e.removeArray(r,j)),c(I.join(",")||""),u(j.join(",")||"")}});var n=function(e){var n=this,a=t(n).find("input"),r=(a.val(),t(n).index()),o=(a.attr("text"),a.is(":checked"));e.srcElement=e.originalEvent&&e.originalEvent.srcElement||e.srcElement,"INPUT"!==e.srcElement.nodeName?o?o&&"checkbox"==i.type&&(a.prop("checked",!1),k.call(a,"uncheck",e),k.call(a,"change",e),i.onChange&&i.onChange.call(a,D,r)):(a.prop("checked",!0),k.call(a,"check",e),k.call(a,"change",e),i.onChange&&i.onChange.call(a,D,r)):"INPUT"===e.srcElement.nodeName&&(o||"checkbox"!=i.type?o&&"checkbox"==i.type?(k.call(a,"check",e),k.call(a,"change",e),i.onChange&&i.onChange.call(a,D,r)):"radio"==i.type&&(k.call(a,"check",e),k.call(a,"change",e),i.onChange&&i.onChange.call(a,D,r)):(k.call(a,"uncheck",e),k.call(a,"change",e),i.onChange&&i.onChange.call(a,D,r))),i.popup&&i.autoClose&&s(),k.call(a,"select",e),e.stopPropagation()},a=function(e){i.callback&&i.callback.call(this,D),e.stopPropagation()};O.on("click",i.handle,n),O.on("click.bui",i.callbackHandle,a),R=!0}function r(e){var i="";return F.popup&&(i+='<div id="'+P+'" class="bui-dialog bui-dialog-select">',F.title&&(i+='<div class="bui-dialog-head">'+F.title+"</div>"),i+='  <div class="bui-dialog-main">'),F.popup&&(i+="  </div>",F.buttons.length>0&&(i+='    <div class="bui-dialog-foot bui-box">',t.each(F.buttons,function(e,t){i+='        <div class="span1">',i+='             <div class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>",i+="        </div>"}),i+="    </div>"),i+="</div>"),i}function o(i){var n=e.guid(),a="";return a+='    <div class="bui-list">',t.each(i,function(e,t){var i="string"==typeof t?t:t.name||"",r=t&&t.value?t.value:e,o="";"checkbox"==F.type?o='        <input type="checkbox" class="'+(F.className||"bui-checkbox")+'" name="'+n+'" value="'+r+'" text="'+i+'">':"radio"==F.type?o='        <input type="radio" class="'+(F.className||"bui-checkbox")+'" name="'+n+'" value="'+r+'" text="'+i+'">':"select"==F.type&&(o='        <input type="radio" class="'+(F.className||"bui-choose")+'" name="'+n+'" value="'+r+'" text="'+i+'">'),a+='    <div class="bui-btn bui-box bui-btn-line">',"left"==F.direction&&(a+=o),"center"==F.direction?(a+='        <div class="span1" align="center">'+i+"</div>",a+=o):a+='        <div class="span1">'+i+"</div>","right"==F.direction&&(a+=o),a+="    </div>"}),a+="    </div>"}function l(e){return k.call(this,"showbefore"),F.popup&&L?!L.isOpen()&&L.open(function(){e&&e.call(D),k.call(this,"show")}):(O.css("display","block"),e&&e.call(D),k.call(this,"show")),this}function s(e){return k.call(this,"hidebefore"),F.popup&&L?L.isOpen()&&L.close(function(){e&&e.call(D),k.call(this,"hide")}):(O.css("display","none"),e&&e.call(D),k.call(this,"hide")),this}function c(i){if(!i&&""!=i){var n=O.attr("value");return n}var a=[];j=[],I=[],i.indexOf(",")>-1?a=i.split(","):a.push(i),O.find(F.handle).each(function(i,n){var r=t(this).find("input");if(!(r.length<1)){var o=r.val(),l=r.attr("text");e.array.compare(o,a)&&(j.push(l),I.push(o),r.prop("checked",!0))}}),T&&F.change&&T.attr("value",I.join(",")),O.attr("value",I.join(","))}function u(e){if(!e&&""!=e){var e=O.attr("text");return e}T&&F.change&&(T.attr("text",e),S.html(e||C)),O.attr("text",e)}function d(e){var i=[];String(e).indexOf(",")>-1?i=e.split(","):i.push(parseInt(e)),j=[],I=[],t.each(i,function(e,t){var i=E.eq(t),n=i.find("input"),a=n.val(),r=n.attr("text");(r||a)&&(j.push(r),I.push(a))}),"checkbox"==F.type?(u(j.join(",")),c(I.join(","))):(u(j[0]),c(I[0])),k.call(this,"change")}function f(){if("radio"!=F.type||"select"!=F.type){var e=[],i=[];O.find("input").each(function(n,a){var r=t(this),o=r.val(),l=r.attr("text");e.push(l),i.push(o),r.prop("checked",!0)}),c(i.join(",")||""),u(e.join(",")||"")}return this}function h(){return O.find("input").prop("checked",null),c(""),u(""),k.call(this,"reset"),this}function p(e){if("radio"!=F.type||"select"!=F.type){var i=[],n=[];O.find("input").each(function(e,a){var r=t(this).is(":checked"),o=t(this).val(),l=t(this).attr("text");r?t(this).prop("checked",null):(t(this).prop("checked",!0),i.push(l),n.push(o))}),c(n.join(",")||""),u(i.join(",")||"")}}function g(){var e=T;return e&&e.addClass("disabled"),this}function v(){var e=T;return e&&e.removeClass("disabled"),this}function m(e){var e=1==e;O&&(O.off(),e&&O.remove()),T&&(T.off("click.bui"),e&&T.remove()),L&&L.destroy(e),x("show"),x("hide"),x("change"),x("select"),x("check"),x("uncheck")}function b(t){var i={dialog:L||{}};return e.widget.call(i,t)}function w(t,i){return e.option.call(D,t,i)}function y(t,i){return e.on.apply(D,arguments),this}function x(t,i){return e.off.apply(D,arguments),this}function k(t){D.self=this==window||this==D?null:this,e.trigger.apply(D,arguments)}var T,O,C,S,j,I,E,L,N={id:"",trigger:"",triggerChildren:".span1",handle:".bui-list .bui-btn",className:"",appendTo:"body",data:[],popup:!0,title:"",autoClose:!1,height:0,width:0,mask:!0,change:!0,effect:"fadeInUp",type:"radio",direction:"left",position:"bottom",fullscreen:!1,buttons:[],onChange:null,callbackHandle:".bui-dialog-foot .bui-btn",callback:null},D={handle:{},on:y,off:x,value:c,active:d,disabled:g,enabled:v,text:u,show:l,hide:s,selectAll:f,selectNone:h,unselect:p,destroy:m,widget:b,option:w,config:F,init:n},F=D.config=t.extend(!1,{},N,e.config.select,i),P=e.guid(),R=!1;return n(F),D},e}(bui||{},libs),function(e){"use strict";return e.dropdown=function(t){function i(t){var i=$.extend(!0,j,t);if(!i.id)return void e.showLog("dropdown id不能为空","bui.dropdown.init");w=e.obj(i.id),j=S.config=i,y=w.children(i.handle),O=i.target?w.children(i.target):y.next(),k=i.relative,x=w.attr("position")||i.position;var r=w.offset()&&w.offset().left>=document.documentElement.clientWidth?0:w.offset()&&w.offset().left,l=i.width?"auto":-r+"px",s={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:l},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:l},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};T=i.width>0?i.width:k?I:i.width,parseFloat(T)>0&&O.width(T);var c=i.showArrow?s[x].arrowPosition+" "+s[x].menuPosition:s[x].menuPosition;a(c,s[x].left);var u=O.find(".active").eq(0),d=u.index();return d>=0&&o(d),E||n(i),this}function n(e){var t=function(e){if(!$(this).hasClass("disabled")){var t=$(this).hasClass("active");u(),t?s():c(),e.stopPropagation()}},i=function(t){var i=$(this).attr("value")||"",n=$.trim($(this).text()),a=void 0!=w.attr("change")?w.attr("change"):e.change;e.showActive&&$(this).addClass("active").siblings().removeClass("active"),r.call(this,i),1==a&&l.call(this,n),s(),e.callback&&e.callback.call(this,t)};y.on("click.bui",t),w.on("click.bui",e.targetHandle,i);var n=function(e){u(),e.stopPropagation()};$("body").on("click.bui",":not(.bui-dropdown)",n),E=!0}function a(e,t){O.addClass(e),k&&O.css({left:t})}function r(e){if(void 0==e){var t=y.attr("value");return t}y.attr("value",e),j.change||b.call(this,"change",{target:y[0]})}function o(e){e=parseInt(e);var t=O.find(j.targetHandle).eq(e);if(t.length>0){var i=$.trim(t.text()),n=t.attr("value")||"";l(i),r(n),j.showActive&&t.addClass("active").siblings().removeClass("active")}}function l(e){if(void 0==e){var t=$.trim(y.text());return t}var i=y.children(j.handleChildren);i?i.text(e):y.text(e),b.call(this,"change",{target:y[0]})}function s(){y.removeClass("active"),O.css("display","none"),b.call(this,"hide",{target:y[0]})}function c(){y.addClass("active"),O.css("display","block"),b.call(this,"show",{target:y[0]})}function u(){$(".bui-dropdown > .bui-btn").removeClass("active"),$(".bui-dropdown > .bui-list").css("display","none"),b.call(this,"hide",{target:y[0]})}function d(){var e=y;return e&&e.addClass("disabled"),this}function f(){var e=y;return e&&e.removeClass("disabled"),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),y&&(y.off("click.bui"),e&&y.remove()),$("body").off("click.bui"),m("show"),m("hide")}function p(t){var i={};return e.widget.call(i,t)}function g(t,i){return e.option.call(S,t,i)}function v(t,i){return e.on.apply(S,arguments),this}function m(t,i){return e.off.apply(S,arguments),this}function b(t){S.self=this==window||this==S?null:this,e.trigger.apply(S,arguments)}var w,y,x,k,T,O,C={id:"",handle:".bui-btn",handleChildren:".span1",target:"",targetHandle:".bui-btn",position:"bottom",showArrow:!1,showActive:!0,width:0,relative:!0,change:!0,callback:null},S={handle:{},on:v,off:m,active:o,disabled:d,enabled:f,value:r,text:l,hide:s,show:c,hideAll:u,destroy:h,widget:p,option:g,config:j,init:i},j=S.config=$.extend(!0,{},C,e.config.dropdown,t),I=document.documentElement.clientWidth,E=!1;return i(j),S},e}(bui||{}),function(e,t){"use strict";return e.accordion=function(i){function n(i){var n=t.extend(!0,j,i);return x=window.viewport.width()||document.documentElement.clientWidth,k=window.viewport.height()||document.documentElement.clientHeight,I=e.obj(n.id)||t("."+e.prefix("accordion")),j=S.config=n,T=n.handle.indexOf("#")>-1?e.obj(n.handle):I.children(n.handle),O=n.target.indexOf("#")>-1?e.obj(n.target):I.children(n.target),a(n),E||r(n),this}function a(e){T.removeClass("active"),O.css("display","none"),parseFloat(e.targetHeight)>0&&O.height(e.targetHeight),parseFloat(e.height)>0&&I.height(e.height)}function r(e){var i=function(i){t(this).hasClass("disabled")||t(this).attr("href")||(s.call(this,e),e.callback&&e.callback.call(this,S),!t(this).attr("href")&&i.stopPropagation())};e.handle.indexOf("#")>-1?T.on("click.bui",i):I.off("click.bui").on("click.bui",e.handle,i),E=!0}function o(e){var t;return t="number"==typeof e?T.eq(e):T,t&&t.addClass("disabled"),this}function l(e){var t;return t="number"==typeof e?T.eq(e):T,t&&t.removeClass("disabled"),this}function s(i){var n=t(this),a=n.hasClass("active"),r=(T.index(this),i.target.indexOf("#")>-1?e.obj(i.target):n.next(i.target));i.single?a?(n.removeClass("active"),r.css("display","none"),y.call(S,"hide",{target:n})):(p(),n.addClass("active"),r.css("display","block"),y.call(S,"show",{target:n})):a?(n.removeClass("active"),r.css("display","none"),y.call(S,"hide",{target:n})):(n.addClass("active"),r.css("display","block"),y.call(S,"show",{target:n}))}function c(e){var e=Number(e)||0,t=T.eq(e).length?T.eq(e):T,i=O.eq(e).length?O.eq(e):t.next(j.target);return t.addClass("active"),i.css("display","block"),y.call(this,"show",{target:T[e]}),this}function u(e){var e=Number(e)||0,t=T.eq(e).length?T.eq(e):T,i=O.eq(e).length?O.eq(e):t.next(j.target);return t.removeClass("active"),i.css("display","none"),y.call(this,"hide",{target:T[e]}),this}function d(){return I.length>1?I.each(function(e,t){f(0,t)}):f(0),y.call(this,"show",{target:T[0]}),this}function f(e,i){var e=e||0,n=i?t(i):I;n.children(j.handle).eq(e).addClass("active").next(j.target).css("display","block")}function h(){return T.each(function(e,i){t(i).addClass("active").next(j.target).css("display","block")}),y.call(this,"showall",{target:T}),this}function p(){return T.each(function(e,i){t(i).removeClass("active").next(j.target).css("display","none")}),y.call(this,"hideall",{target:T}),this}function g(e){var e=1==e;I&&(I.off("click.bui"),e&&I.remove()),w("hide"),w("show")}function v(t){var i={};return e.widget.call(i,t)}function m(t,i){return e.option.call(S,t,i)}function b(t,i){return e.on.apply(S,arguments),this}function w(t,i){return e.off.apply(S,arguments),this}function y(t){S.self=this==window||this==S?null:this,e.trigger.apply(S,arguments)}var x,k,T,O,C={id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,callback:null},S={handle:{},on:b,off:w,showFirst:d,showAll:h,hideAll:p,disabled:o,enabled:l,destroy:g,show:c,hide:u,widget:v,option:m,config:j,init:n},j=S.config=t.extend(!0,{},C,e.config.accordion,i),I=e.obj(j.id),E=!1;return n(j),S},e}(bui||{},libs),function(e,t){"use strict";return e.rating=function(i){function n(i){var n=t.extend(!0,S,i);return n.id?(w=e.obj(n.id),S=C.config=n,y=n.fullClassName,x=n.halfClassName,l(n),j||o(n),this):void e.hint("rating id不能为空")}function a(t){var i=(e.guid(),""),n=0,a=t.stars;for(n=0;a>n;n++)i+='<div class="bui-rating-cell" ></div>';return i}function r(e){var t,i="",e=String(e)||String(k),n=0,a=S.stars,r=[];r=e.indexOf(".")>-1?e.split("."):[e,0];var o=parseInt(r[0]);for(t=r[1]/10*100+"%",n=0;a>n;n++)o>n&&(i+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),n==o&&(i+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),n>o&&(i+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return i}function o(e){if(!e.disabled){var i=String(e.value).indexOf(".")>-1?1:0;w.on("click.bui",e.handle,function(n){var a=t(this).index(),r=0;if(e.half){r=i%2==0?a+.5:a+1}else r=a+1;s(r),c(r),i++,e.callback&&e.callback.call(this,C),n.stopPropagation()})}j=!0}function l(e){if(e.render){var t=a(e);w.html(t),T=w.find(e.handle)}else T=w.find(e.handle);c(e.value)}function s(e){var i=[];e=String(e),S.half&&e.indexOf(".")>-1?i=e.split("."):i.push(e),T.removeClass(y).removeClass(x),T.each(function(e,n){1==i.length&&e<i[0]?t(n).addClass(y):2==i.length&&(e<i[0]&&t(n).addClass(y),e==i[0]&&t(n).addClass(x))})}function c(e){return e?(w.attr("value",e),s(e),k=e,b.call(this,"change",e)):k=w.attr("value"),k}function u(e){var t=r(e);w.attr("value",e).html(t),k=e}function d(e){var e=0!=e;return e?(w.off("click.bui",S.handle),b.call(this,"disabled")):f(),this}function f(e){return S.disabled=!1,o(),b.call(this,"undisabled"),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),m("change")}function p(t){var i={};return e.widget.call(i,t)}function g(t,i){return e.option.call(C,t,i)}function v(t,i){return e.on.apply(C,arguments),this}function m(t,i){return e.off.apply(C,arguments),this}function b(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var w,y,x,k,T,O={id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,callback:null},C={handle:{},on:v,off:m,disabled:d,show:u,value:c,destroy:h,widget:p,option:g,config:S,init:n},S=C.config=t.extend(!0,{},O,e.config.rating,i),j=!1;return n(S),C},e}(bui||{},libs),function(e){"use strict";return e.actionsheet=function(t){function i(t){var i=$.extend(!0,k,t);m=e.obj(i.trigger),k=x.config=i,b=e.guid();var o=a(i.buttons);return $(i.appendTo).append(o),g=e.dialog({id:b,position:i.position,mask:i.mask,opacity:i.opacity,onMask:function(e){r()}}),w=e.obj(b),v=w.find(i.handle),T||n(),this}function n(){var e=function(e){e.target=this,k.callback&&k.callback.call(this,e,x),p.call(this,"click",e)},t=function(e){$(this).hasClass("disabled")||o.call(this)};w.on("click.bui",k.handle,e),m.on("click.bui",t),T=!0}function a(e){var t=parseFloat(k.width),i=t>0?"width:"+t+"px;left:50%;right:0;margin-left:-"+t/2+"px;":"",n="";return e&&e.length&&(n+='<div id="'+b+'" class="bui-actionsheet" style="'+i+'">',n+='    <ul class="bui-list round">',$.each(e,function(e,t){n+='        <li class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||"")+"</li>"}),n+="    </ul>",k.cancelText?n+='    <div class="bui-btn round" value="cancel">'+k.cancelText+"</div>":"",n+="</div>"),n}function r(e){var t=this;return p.call(t,"hidebefore",{target:w[0]}),g.isOpen()&&g.close(function(){e&&e.call(x),p.call(t,"hide",{target:w[0]})}),this}function o(e){var t=this;return p.call(t,"showbefore",{target:w[0]}),!g.isOpen()&&g.open(function(){e&&e.call(x),p.call(t,"show",{target:w[0]})}),this}function l(e){var t=m;return t&&t.addClass("disabled"),this}function s(){var e=m;return e&&e.removeClass("disabled"),this}function c(e){var e=1==e;m&&m.off("click.bui"),h("hide"),h("show"),g&&g.destroy(e)}function u(t){var i={dialog:g};return e.widget.call(i,t)}function d(t,i){return e.option.call(x,t,i)}function f(t,i){return e.on.apply(x,arguments),this}function h(t,i){return e.off.apply(x,arguments),this}function p(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var g,v,m,b,w,y={appendTo:"body",trigger:"",handle:".bui-btn",position:"bottom",width:0,mask:!0,opacity:.6,buttons:[],cancelText:"取消",callback:null},x={handle:{},on:f,off:h,disabled:l,enabled:s,hide:r,show:o,destroy:c,widget:u,option:d,config:k,init:i},k=x.config=$.extend(!1,{},y,e.config.actionsheet,t),T=!1;return i(k),x},e}(bui||{}),function(e,t){return e.number=function(i){function n(i){var n=t.extend(!0,I,i);return L=!1,w=n.max,y=n.min,x=n.step,n.id?(C=e.obj(n.id),I=j.config=n,n.render&&r(n),k=C.children(n.prev),T=C.children(n.next),O=C.children(n.input),E||o(n),n.disabled&&O.attr({disabled:"disabled"}),s(n.value),this):void e.showLog("number id不能为空","bui.number.init")}function a(e){var t="";return t+='    <div class="bui-number-prev">-</div>',t+='    <input type="text" value="'+e.value+'"/>',t+='    <div class="bui-number-next">+</div>'}function r(e){var t=a(e);return C.html(t),this}function o(i){return C.on("input",i.input,e.unit.debounce(function(e){var n=isNaN(parseInt(t(this).val()))?0:parseInt(t(this).val());/^[0-9]*$/i.test(n)&&s(n),i.onInput&&i.onInput.call(this,n),e.stopPropagation()},400)),C.on("click.bui",i.prev,function(e){d.call(this,e),i.callback&&i.callback.call(this,e,j),e.preventDefault(),e.stopPropagation()}),C.on("click.bui",i.next,function(e){f.call(this,e),i.callback&&i.callback.call(this,e,j),e.preventDefault(),e.stopPropagation()}),E=!0,this}function l(){var e=parseInt(O.val());return e}function s(e){b.call(O,"change",e);var t=e||0;return t>w&&(t=w),y>t&&(t=y),t&&t>=y&&w>=t&&(t=t),O.val(parseInt(t)),this}function c(e){var t=0;return e?(s(e),t=e):t=l(),t}function u(e){var e=0!=e;return e?O.attr({disabled:"disabled"}):O.removeAttr("disabled"),this}function d(){var e=O.val(),t=parseInt(e),i=t-=x;return s(i),b.call(this,"prev",i),this}function f(){var e=O.val(),t=parseInt(e),i=t+=x;return s(i),b.call(this,"next",i),this}function h(e){var e=1==e;C&&(C.off("click.bui"),C.off("input"),e&&C.remove()),m("prev"),m("next"),m("change"),L=!0}function p(t){var i={};return e.widget.call(i,t)}function g(t,i){return e.option.call(j,t,i)}function v(t,i){return e.on.apply(j,arguments),this}function m(t,i){return e.off.apply(j,arguments),this}function b(t){j.self=this==window||this==j?null:this,e.trigger.apply(j,arguments)}var w,y,x,k,T,O,C,S={id:null,min:0,max:100,step:1,value:0,disabled:!1,render:!0,tips:!1,prev:".bui-number-prev",input:"input",next:".bui-number-next",onInput:null,callback:null},j={handle:{},on:v,off:m,disabled:u,value:c,prev:d,next:f,destroy:h,widget:p,option:g,config:I,init:n},I=j.config=t.extend(!0,{},S,e.config.number,i),E=!1,L=!1;return n(I),j},e}(bui||{},libs),function(e,t){"use strict";return e.stepbar=function(i){function n(i){var n=t.extend(!0,w,i);if(!n.id)return void e.hint("stepbar id不能为空");g=e.obj(n.id),w=b.config=n;var o=a(n.data);return t(n.id).html(o),v=g.children(),y||r(n),this}function a(e){var i="";return t.each(e,function(e,t){i+='<div class="bui-stepbar-cell">',i+='    <span class="bui-stepbar-dot"></span>',i+='    <div class="bui-stepbar-text">',t.title&&(i+="        <h3>"+t.title+"</h3>"),t.subtitle&&(i+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(i+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),i+="    </div>",i+="</div>"}),i}function r(e){var i=function(i){if(e.click){var n=t(this).index();o(n)}e.callback&&e.callback.call(this,i,b)};return g.on("click.bui",e.handle,i),y=!0,this}function o(e){if("number"==typeof e)return e=e>=v.length-1?v.length-1:0>e?0:e,v.each(function(i,n){e>i&&t(n).removeClass("active").addClass("visited"),i==e&&t(n).removeClass("visited").addClass("active"),i>e&&t(n).removeClass("visited active")}),p.call(this,"change",e),e;var e=g.children(".active").index();return e}function l(){var e=o()+1;return p.call(this,"next",e),o(e)}function s(){var e=o()-1;return p.call(this,"prev",e),o(e)}function c(e){var e=1==e;g&&(g.off("click.bui"),e&&g.remove()),h("next"),h("prev"),h("change")}function u(t){var i={};return e.widget.call(i,t)}function d(t,i){return e.option.call(b,t,i)}function f(t,i){return e.on.apply(b,arguments),this}function h(t,i){return e.off.apply(b,arguments),this}function p(t){b.self=this==window||this==b?null:this,e.trigger.apply(b,arguments)}var g,v,m={id:null,handle:".bui-stepbar-cell",click:!0,data:[],callback:null},b={handle:{},on:f,off:h,value:o,next:l,prev:s,destroy:c,widget:u,option:d,config:w,init:n},w=b.config=t.extend(!0,{},m,e.config.stepbar,i),y=!1;return n(w),b},e}(bui||{},libs);var Picker=function(e){function t(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function i(e,t){for(var i=0;i<e.length;i++){var n=e[i].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=t}return e}function n(e,t){"string"!=typeof t&&(t+="ms");for(var i=0;i<e.length;i++){var n=e[i].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=t}return e}function a(e,t){var i,n,a,r;return"undefined"==typeof t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(n=a.transform||a.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),r=new WebKitCSSMatrix("none"===n?"":n)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),"x"===t&&(n=window.WebKitCSSMatrix?r.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(n=window.WebKitCSSMatrix?r.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0}var r=this,o={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};e=e||{};for(var l in o)"undefined"==typeof e[l]&&(e[l]=o[l]);r.params=e,r.cols=[],r.initialized=!1;var s=function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),i=e.match(/(iPad).*OS\s([\d_]+)/),n=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!i&&e.match(/(iPhone\sOS)\s([\d_]+)/),r=i||n||a,o=!!t;return r||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!o}();return r.setValue=function(e,t){var i=0;if(0===r.cols.length)return r.value=e,void r.updateValue(e);for(var n=0;n<r.cols.length;n++)r.cols[n]&&!r.cols[n].divider&&(r.cols[n].setValue(e[i],t),i++)},r.updateValue=function(e){for(var t=e||[],i=[],n=0;n<r.cols.length;n++)r.cols[n].divider||(t.push(r.cols[n].value),i.push(r.cols[n].displayValue));t.indexOf(void 0)>=0||(r.value=t,r.displayValue=i,r.params.onChange&&r.params.onChange(r,r.value,r.displayValue))},r.initPickerCol=function(e,o){function l(e){if(!k&&!x){var t=e.originalEvent||e;t.preventDefault(),x=!0,T=O=t.targetTouches[0].pageY,C=(new Date).getTime(),F=!0,j=E=a(p.wrapper[0],"y")}}function c(e){if(x){var o=e.originalEvent||e;o.preventDefault(),F=!1,O=o.targetTouches[0].pageY,k||(t(y),k=!0,j=E=a(p.wrapper[0],"y"),n(p.wrapper,"0ms")),o.preventDefault();var l=O-T;E=j+l,I=void 0,b>E&&(E=b-Math.pow(b-E,.8),I="min"),E>w&&(E=w+Math.pow(E-w,.8),I="max"),i(p.wrapper,"translate3d(0,"+E+"px,0)"),p.updateItems(void 0,E,0,r.params.updateValuesOnTouchmove),N=E-L||E,D=(new Date).getTime(),L=E}}function u(e){if(!x||!k)return void(x=k=!1);x=k=!1,n(p.wrapper,""),I&&("min"===I?i(p.wrapper,"translate3d(0,"+b+"px,0)"):i(p.wrapper,"translate3d(0,"+w+"px,0)")),S=(new Date).getTime();var t,a;S-C>300?a=E:(t=Math.abs(N/(S-D)),a=E+N*r.params.momentumRatio),a=Math.max(Math.min(a,w),b);var o=-Math.floor((a-w)/v);r.params.freeMode||(a=-o*v+w),i(p.wrapper,"translate3d(0,"+parseInt(a,10)+"px,0)"),p.updateItems(o,a,"",!0),setTimeout(function(){F=!0},100)}function d(e){if(F){t(y);var i=$(this).attr("data-picker-value");p.setValue(i)}}var f=$(e),h=f.index(),p=r.cols[h];if(!p.divider){p.container=f,p.wrapper=p.container.find(".picker-items-col-wrapper"),p.items=p.wrapper.find(".picker-item");var g,v,m,b,w;p.replaceValues=function(e,t,i){p.destroyEvents(),p.values=e,p.displayValues=t;var n=r.columnHTML(p,!0);p.wrapper.html(n),p.items=p.wrapper.find(".picker-item"),p.calcSize(),p.setValue(i||p.values[0],0,!0),p.initEvents()},p.calcSize=function(){r.params.rotateEffect&&(p.container.removeClass("picker-items-col-absolute"),p.width||(p.container[0].style.width=""));var e,t;e=0,t=p.container[0].offsetHeight,g=p.wrapper[0].offsetHeight,v=p.items[0].offsetHeight,m=v*p.items.length,b=t/2-m+v/2,w=t/2-v/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container[0].style.width=e),r.params.rotateEffect&&(p.width||(p.items.each(function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""}),p.container[0].style.width=e+2+"px"),p.container.addClass("picker-items-col-absolute"))},p.calcSize(),i(p.wrapper,"translate3d(0,"+w+"px,0)"),n(p.wrapper,"0ms");var y;p.setValue=function(e,t,a){"undefined"==typeof t&&(t="");var r=p.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();"undefined"!=typeof r&&-1!==r||(r=0);var o=-r*v+w;i(p.wrapper,"translate3d(0,"+o+"px,0)"),n(p.wrapper,t+"ms"),p.updateItems(r,o,t,a)},p.updateItems=function(e,t,o,l){"undefined"==typeof t&&(t=a(p.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-w)/v)),0>e&&(e=0),e>=p.items.length&&(e=p.items.length-1);var c=p.activeIndex;p.wrapper.find(".picker-selected").removeClass("picker-selected"),n(p.items,o);var u=p.items.eq(e).addClass("picker-selected");if(i(u,""),r.params.rotateEffect){(t-(Math.floor((t-w)/v)*v+w))/v;p.items.each(function(){var e=$(this),n=e.index()*v,a=w-t,r=n-a,o=r/v,l=Math.ceil(p.height/v/2)+1,c=-18*o;c>180&&(c=180),-180>c&&(c=-180),Math.abs(o)>l?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),i(e,"translate3d(0, "+(-t+w)+"px, "+(s?-110:0)+"px) rotateX("+c+"deg)")})}(l||"undefined"==typeof l)&&(p.value=u.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,c!=e&&(p.onChange&&p.onChange(r,p.value,p.displayValue),r.updateValue()))},o&&p.updateItems(0,w,0);var x,k,T,O,C,S,j,I,E,L,N,D,F=!0;p.initEvents=function(e){var t=/hp-tablet/gi.test(navigator.appVersion),i="ontouchstart"in window&&!t,n=i?"touchstart":"mousedown",a=i?"touchmove":"mousemove",r=i?"touchend":"mouseup",o=e?"off":"on";p.container[o](n,l),
p.container[o](a,c),p.container[o](r,u),"mouseup"==r&&document.documentElement.addEventListener("mouseleave",u,!1),p.items[o]("click",d)},p.destroyEvents=function(){p.initEvents(!0)},p.initEvents()}},r.columnHTML=function(e,t){var i="",n="";if(e.divider)n+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var a=0;a<e.values.length;a++)i+='<div class="picker-item" data-picker-value="'+e.values[a]+'">'+(e.displayValues?e.displayValues[a]:e.values[a])+"</div>";n+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+i+"</div></div>"}return t?i:n},r.layout=function(){var e,t="",i="";r.cols=[];var n="";for(e=0;e<r.params.cols.length;e++){var a=r.params.cols[e];n+=r.columnHTML(r.params.cols[e]),r.cols.push(a)}i="picker-modal picker-columns "+(r.params.cssClass||"")+(r.params.rotateEffect?" picker-3d":""),t='<div class="'+i+'"><div class="picker-modal-inner picker-items">'+n+'<div class="picker-center-highlight"></div></div></div>',r.pickerHTML=t},r.init=function(){r.initialized||(r.layout(),r.container=$(r.pickerHTML),r.container.addClass("picker-modal-inline"),$(r.params.container).html(r.container),r.container.find(".picker-items-col").each(function(){var e=!0;(!r.initialized&&r.params.value||r.initialized&&r.value)&&(e=!1),r.initPickerCol(this,e)}),r.value?r.setValue(r.value,0):r.params.value&&r.setValue(r.params.value,0)),r.initialized=!0},r.init(),r};!function(e,t){return e.picker=function(e){return new Picker(e)},e}(bui||{},libs),function(e,t){return e.pickerdate=function(){function i(e){return e&&e.constructor==Date?e:e&&"string"==typeof e?(e=e.replace(/-/gim,"/").replace(/^(\d+\/\d+?)($|\s)/,function(e,t){return t+"/1"}),new Date(e)):"number"==typeof e?new Date(e):new Date}function n(e,t){var e,t,i=new Date;return i.getTime()<e.getTime()?e:i.getTime()>t.getTime()?t:i}function a(a){function r(e){var t=new Date("1970/1/1");return E.forEach(function(i,n){t["set"+i](e[C[i]].value-("Month"==i?1:0))}),t}function o(e){var t=i(e);return E.map(function(e,i){return t["get"+e]()+("Month"==e?1:0)})}function l(e){t(this).hasClass("disabled")||O&&!O.isOpen()&&O.open(function(){})}function s(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var c,u=e.guid(),d={id:u,height:260,popup:!0,mask:!0,position:"bottom",appendTo:"body",rotateEffect:!1,buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],onMask:function(){O&&O.close()},callback:null},f=t.extend(!0,{},d,a);f.callback=function(){var e=a.callback&&a.callback.call(this);1!=e&&"undefined"!=typeof e||("取消"==t(this).text().trim()||"cancel"==t(this).text().trim()||"关闭"==t(this).text().trim()?k.value(c):c=k.value())};var h,p,g,v,m,b,w,y,x,k=this,T=function(){},O=null,C={},S=["FullYear","Month","Date"],j=["Hours","Minutes","Seconds"],I={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},E=[],L=!1;this.config={},this.option=function(){},this.cols=function(e){e=e||{};var t=[];return y=[],w=[],C={},E=[],S.forEach(function(i,n){"none"!==e[I[i]]&&(E.push(i),t.push(i))}),j.forEach(function(t,i){"none"!==e[I[t]]&&(E.push(t),y.push(t))}),t.forEach(function(t,i){C[t]=w.length,w.push(F[t](e[I[t]]))}),y.forEach(function(i,n){0==n&&0!=t.length?w.push(F.Space()):w.push(F.Divider()),0==t.length&&(w[0].content=""),C[i]=w.length,w.push(F[i](e[I[i]]))}),k.picker&&(k.picker.params.cols=w,k.picker.initialized=!1,k.picker.init()),L=!1,this},this.id=function(e){e&&!v&&(v=e)},this.reset=function(){return k.picker&&(k.picker.initialized=!1,k.picker.init()),this},this.min=function(e){return p=i(e||f.min||"1960/01/01 00:00:00"),this},this.max=function(e){return g=i(e||f.max||"2030/01/01 00:00:00"),this},this.value=function(e){if(e){var t=i(e),n=o(t);return k.picker.setValue(n,0),this}return b(k.picker,k.value,k.displayValue)},this.handle=function(t){if(t&&h!==t){var i=e.obj(h);i&&i.off("click",l),i=e.obj(t),i&&i.on("click",l),l.hasOpen=!1,h=t}return this};var N={y:function(e,t){return e.getFullYear().toString().slice(-t)},M:function(e,t){var i=t>1?"0":"";return(i+(e.getMonth()+1)).slice(-2)},d:function(e,t){var i=t>1?"0":"";return(i+e.getDate()).slice(-2)},h:function(e,t){var i=t>1?"0":"";return(i+e.getHours()).slice(-2)},m:function(e,t){var i=t>1?"0":"";return(i+e.getMinutes()).slice(-2)},s:function(e,t){var i=t>1?"0":"";return(i+e.getSeconds()).slice(-2)}};this.formatValue=function(e){return b=function(t,i,n){var a=r(t.cols);return e.replace(/y+|M+|d+|h+|m+|s+/g,function(e){return N[e[0]](a,e.length)})},k.picker&&k.picker.updateValue(),L=!1,this},this.onChange=function(e){return m=e||T,s.call(this,"change",x),this},this.popup=function(i){if(f.popup&&!O){var n='<div id="'+u+'" class="bui-dialog" >';n+='<div class="bui-dialog-main"><div id="'+u+'-picker"></div></div>',f.buttons&&f.buttons.length&&(n+='<div class="bui-dialog-foot bui-box">',t.each(f.buttons,function(e,t){var i="object"==typeof t&&"className"in t?" "+t.className:"",a="object"==typeof t&&"name"in t?t.name:t;n+='<div class="span1"><div class="bui-btn'+i+'">'+a+"</div></div>"}),n+="</div>"),n+="</div>";t(f.appendTo).append(n);v=e.obj(u+"-picker")}return this};var D=function(e,t,i){var n=r(e.cols),a=p["get"+t](),o=g["get"+t](),l=n.getTime(),s=p.getTime(),c=g.getTime();return s>l&&n["get"+t]()<a?("Month"==t&&(a+=1),void e.cols[C[t]].setValue(a)):l>c&&n["get"+t]()>o?("Month"==t&&(o+=1),void e.cols[C[t]].setValue(o)):void(i&&(s>l||l>c)&&e.cols[C[i]].onChange(e))},F={};F.FullYear=function(e){return e=e||{values:function(){for(var e=[],t=p.getFullYear(),i=g.getFullYear(),n=t;i>=n;n++)e.push(n);return e}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){D(e,"FullYear",C.Month?"Month":"")}}},F.Month=function(e){return e=e||{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},{values:e.values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,i){for(var n=new Date(e.cols[C.FullYear].value,parseInt(e.cols[C.Month].value),0).getDate(),a=[],r=1;n>=r;r++)a.push(r);var o=e.cols[C.Date];o&&o.replaceValues&&o.replaceValues(a,null,o.value<n?o.value:n),D(e,"Month",C.Date?"Date":"")}}},F.Date=function(e){return e=e||{values:function(){var e=31,t=[];do t.unshift(e);while(e--);return t}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){D(e,"Date",C.Hours?"Hours":"")}}},F.Space=function(){return{divider:!0,content:"  "}},F.Hours=function(e){return e=e||function(){for(var e=[],t=[],i=0;24>i;i++)e.push(i),t.push(("0"+i).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){D(e,"Hours",C.Minutes?"Minutes":"")}}},F.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},F.Minutes=function(e){return e=e||function(){for(var e=[],t=[],i=0;60>i;i++)e.push(i),t.push(("0"+i).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){D(e,"Minutes",C.Seconds?"Seconds":"")}}},F.Seconds=function(e){return e=e||function(){for(var e=[],t=[],i=0;60>i;i++)e.push(i),t.push(("0"+i).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){D(e,"Seconds")}}},k.min(f.min),k.max(f.max),k.cols(f.cols),k.onChange(f.onChange),k.formatValue(f.formatValue||"yyyy-MM-dd hh:mm:ss"),k.id(f.id),k.handle(f.handle),k.popup(f),k.picker=e.picker({container:v,rotateEffect:f.rotateEffect,value:o(f.value?i(f.value):n(p,g)),onChange:function(e,t,i){var n=b(e,t,i);x!=n&&(x=n,m(n),s.call(this,"change",n))},cols:w}),f.popup&&!O&&(O=e.dialog(f),O&&O.on("open",function(){c=b(k.picker,k.value,k.displayValue),k.picker&&(k.picker.initialized=!1,k.picker.init()),s.call(this,"show")}),O&&O.on("close",function(){s.call(this,"hide")})),this.disabled=function(){var t=e.obj(h);return t&&t.addClass("disabled"),this},this.enabled=function(){var t=e.obj(h);return t&&t.removeClass("disabled"),this},this.destroy=function(e){var e=1==e;this.off("show"),this.off("hide"),this.off("change"),O&&O.destroy(e),k=null},this.widget=function(t){var i={dialog:O||{}};return e.widget.call(i,t)},this.on=function(t,i){return e.on.apply(k,arguments),this},this.off=function(t,i){return e.off.apply(k,arguments),this}}return function(e){return new a(e)}}(),e}(bui||{},libs),function(e,t){return e.ajax=function(i){function n(e){var i=function(t,i,n){var r;if("string"==typeof t&&"json"==e.dataType)try{r=JSON.parse(t)}catch(o){r=t}else r=t||{};s&&s(r,i,n),a.resolve(r,i,n)},n=function(t,i,n){var r;if("string"==typeof t&&"json"==e.dataType)try{r=JSON.parse(t)}catch(o){r=t}else r=t||{};c&&c(r,i,n),a.reject(r,i,n)};e.success=i,e.error=n;var o=e.type&&e.type.toUpperCase();e.type=o||e.method.toUpperCase(),r=t.ajax(e)}var a=t.Deferred(),r=null,o={data:{},method:"GET",dataType:"json",timeout:6e4,headers:{},processData:!0,mimeType:"none",cache:!1,async:!0,contentType:"","native":!0},l=t.extend(!0,{},o,e.config.ajax,i),s=l.success,c=l.fail||l.error;if(""===l.contentType&&"GET"==l.method?l.contentType="text/html;charset=UTF-8":""===l.contentType&&"POST"==l.method?l.contentType="application/x-www-form-urlencoded":l.contentType=l.contentType,"application/json"==l.contentType&&"object"===e["typeof"](l.data))try{l.data=JSON.stringify(l.data)}catch(u){l.data=l.data}if(!l.url)return e.showLog("url不能为空","bui.ajax"),a;if(a.abort=function(){r&&r.abort()},l["native"]&&e.isWebapp||!l["native"]&&!e.isWebapp)n(l);else{if("undefined"==typeof e["native"].ajax)return n(l),a;a=e["native"].ajax&&e["native"].ajax(l)||a}return a},e}(bui||{},libs),function(e,t){return e.load=function(i){var n,a={url:"",param:{},reload:!1,replace:!1,"native":!0},r=t.extend(!0,{},a,e.config.load,i),o=r.url;if(!r.url)return void e.showLog("url 不能为空!","bui.load:web");if(o.indexOf("tel:")>=0||o.indexOf("mailto:")>=0||o.indexOf("sms:")>=0)return void e.unit.openExtral(o);try{r.param="string"==typeof r.param&&JSON.parse(r.param)||r.param||{}}catch(l){return void e.showLog("param 参数值必须是一个{}对象","bui.load:web")}return document.activeElement.blur(),n=e.setUrlParams(r.url,r.param),r.reload&&e.isWebapp?void(window.location.href=n):r.reload&&!e.isWebapp?void(e["native"].load&&e["native"].load(r)):!r.replace||"load"in window.router?void("load"in window.router?window.router.load&&window.router.load(r):r["native"]&&e.isWebapp||!r["native"]&&!e.isWebapp?window.location.href=n:e["native"].load&&e["native"].load(r)):void window.location.replace(n)},e}(bui||{},libs),function(e,t){return e.getPageParams=function(i){var n=t.Deferred(),a={callback:null,"native":!0};i=i||{};var r=t.extend(!0,{},a,e.config.getPageParams);if("function"==typeof i?r.callback=i:i&&"object"===e["typeof"](i)&&(r=t.extend(!0,{},a,e.config.getPageParams,i)),"getPageParams"in window.router){var o=window.router.getPageParams&&window.router.getPageParams();r.callback&&r.callback(o),n.resolve(o)}else if(r["native"]&&e.isWebapp||!r["native"]&&!e.isWebapp){var l=e.getUrlParams();r.callback&&r.callback(l),n.resolve(l)}else n=e["native"].getPageParams&&e["native"].getPageParams(r)||n;return n},e}(bui||{},libs),function(e,t){return e.back=function(i){function n(){if(-1===a.index?window.history.back():window.history.go(a.index),u)try{clearTimeout(u)}catch(e){}a.delay&&a.callback?u=setTimeout(function(){a.callback()},500):a.callback&&a.callback()}var a,r={index:-1,name:"",delay:!0,"native":!0,callback:null};if("function"==typeof i?(r.callback=i,a=t.extend(!0,{},r,e.config.back)):a=i&&"object"===e["typeof"](i)?t.extend(!0,{},r,e.config.back,i):t.extend(!0,{},r,e.config.back),"back"in window.router)if(window.router.config.syncHistory){var o=router.getHistory(),l=o.length-1;if(a.name){var s=e.array.indexs(a.name,o,"pid"),c=s.length;c?a.index=-(o.length-s[c-1]-1):a.index=-1}Math.abs(a.index)>l&&(a.index=-l),o.length>1&&n()}else window.router.back&&window.router.back(a);else a["native"]&&e.isWebapp||!a["native"]&&!e.isWebapp?n():e["native"].back&&e["native"].back(a);var u},e}(bui||{},libs),function(e,t){return e.refresh=function(i){var n={"native":!0},a=t.extend(!0,{},n,e.config.refresh,i);"refresh"in window.router?window.router.refresh&&window.router.refresh():a["native"]&&e.isWebapp||!a["native"]&&!e.isWebapp?window.location.reload(!0):e["native"].refresh&&e["native"].refresh()},e}(bui||{},libs),function(e,t){return e.run=function(i){var n={},a={id:"",name:"",data:null,onFail:null,"native":!0};"string"==typeof i?n.id=i:i&&"object"===e["typeof"](i)&&(n=t.extend(!0,{},a,e.config.run,i));var r=String(n.id);if(n["native"]&&e.isWebapp||!e.isWebapp&&!n["native"]){if(r.indexOf("http://")>-1||r.indexOf("https://")>-1){var o=e.setUrlParams(n.id,n.data);if(e.platform.isIos())return void(window.location.href=o);var l=window.open("","_blank")||window.open("","_newtab");l.location.href=o}}else e["native"].run&&e["native"].run(n)},e}(bui||{},libs),function(e,t){return e.fileselect=function(i){function n(t){return w=[],y?o():h=e["native"].fileselect&&e["native"].fileselect(t,{module:v})||{},this}function a(i){m=null;var n=this,a=t.extend(!0,g,i);return b=a,y?(f.off("change").on("change",function(){var t=this.files;if(t.length<1)return void(a.onFail&&a.onFail.call(n,t,w));t.length>1&&e.showLog("一次只能选一张图片","bui.fileselect:web"),m=t[0];try{if(!e.array.compare(t[0].name,w,"name")){var i={name:t[0].name,data:t[0],type:t[0].type,size:t[0].size};w.push(i)}}catch(r){e.showLog(r,"bui.fileselect:web")}a.onSuccess&&a.onSuccess.call(n,t,w)}),e.platform.isIos()?f[0].dispatchEvent(new Event("click")):f.trigger("click")):h.add.bind(n)(a),this}function r(e){function t(e){var t=new FileReader;t.onloadend=function(t){var i=new Image,a=!1,r=b.width||800,o=b.quality||.8,l=document.createElement("canvas"),s=l.getContext("2d");i.src=this.result,i.onload=function(){return a?void 0:(l.width=r,l.height=r*(i.height/i.width),s.drawImage(i,0,0,l.width,l.height),i.src=l.toDataURL("image/jpeg",o),n&&n.call(v,i.src,e),void(a=!0))}},t.readAsDataURL(e)}var e=e||{},i=e.data||m,n=e.onSuccess||function(){};e.onFail||function(){};if(y)try{t(i)}catch(a){}else h.toBase64(e);return this}function o(){if(void 0==f){d=bui.guid();var e='<input type="file" name="uploadFiles" id="'+d+'" style="display:none"/>';t("body").append(e),f=t("#"+d)||t('input[name="uploadFiles"]')}}function l(t,i){var i=i||"name";if(!y)return w=h.remove(t,i);if("string"==typeof t){w=e.array.remove(t,w,i);var n=w.length?w[w.length-1].data:null;return m=n,w}return this}function s(){return w=[],m=null,y||h.clear(),w}function c(){return w=y?w:h.data()}function u(){return m=y?m:h.value()}var d,f,h,p={"native":!0,quality:.8,width:800,height:800,mediaType:"picture"},g=t.extend(!0,{},p,e.config.fileselect,i),v={add:a,remove:l,clear:s,value:u,data:c,toBase64:r,init:n},m=null,b=null,w=[],y=g["native"]&&e.isWebapp||!g["native"]&&!e.isWebapp;return n(g),v},e}(bui||{},libs),function(e,t){return e.file=function(i){function n(t){return b=e.fileselect(t),g=a(t),v=r({root:!0,create:!0}),this}function a(i){function n(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}var i={msg:t};a.reject(i)}var a=t.Deferred();return webapp?(h="bui.app",p=window,m=1024*parseInt(T.size)*1024,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(m,function(e){window.requestFileSystem(window.PERSISTENT,e,function(e){a.resolve(e)},n)})):w=e["native"].file&&e["native"].file(i,{fileselect:b,module:k})||{},a}function r(e){var i={folderName:h,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},n=t.extend({},i,e),a="";if(n.create?(a="创建 ",n.param.create=!0):(a="获取 ",n.param.create=!1),webapp){var r=o(n.folderName);r=n.root?r:h+"/"+r,g.done(function(e){e.root.getDirectory(r,n.param,function(t){n.onSuccess&&n.onSuccess.call(k,t,e)},function(e){var t={msg:a+r+" 文件夹失败"};n.onFail&&n.onFail.call(k,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};n.onFail&&n.onFail.call(k,t)})}else w.getFolder(n);return this}function o(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),o(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function l(e){var t;return e&&e.indexOf("/")>-1?t=e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function s(e){var i={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},n=t.extend({},i,e),a="";if(n.create?(a="创建 ",n.param.create=!0):(a="获取 ",n.param.create=!1),!n.fileName||n.fileName.indexOf(".")<0)return void(n.onFail&&n.onFail());if(webapp){var o=l(n.fileName);r({root:n.root,folderName:n.folderName,create:!0,onSuccess:function(e,t){var i=e.name==h?e.name+"/"+o:h+"/"+e.name+"/"+o;t.root.getFile(i,n.param,function(e){y=e,n.onSuccess&&n.onSuccess.call(k,e,t)},function(e){var t={msg:a+o+" 文件失败"};n.onFail&&n.onFail.call(k,t)})},onFail:function(e){n.onFail&&n.onFail(e)}})}else w.getFile(n);return this}function c(e){var i=t.extend(!0,{},e);return webapp?r({root:i.root,folderName:i.folderName,create:i.create,onSuccess:function(e,t){e.removeRecursively(function(){i.onSuccess&&i.onSuccess.call(k,e,t)},function(t){var n={msg:"删除 "+i.folderName+" 文件失败"};i.onFail&&i.onFail.call(k,n,e)})},onFail:function(e){var t={msg:"删除 "+i.folderName+" 文件失败"};i.onFail&&i.onFail.call(k,t)}}):w.removeFolder(i),this}function u(e){var i=t.extend(!0,{},e);return webapp?s({root:i.root,create:i.create,folderName:i.folderName,fileName:i.fileName,onSuccess:function(e,t){e.remove(function(){i.onSuccess&&i.onSuccess.call(k,e,t)},function(t){var n={msg:"删除 "+i.fileName+" 文件失败"};i.onFail&&i.onFail.call(k,n,e)})},onFail:function(e){var t={msg:"删除 "+i.fileName+" 文件失败"};i.onFail&&i.onFail.call(k,t)}}):w.removeFile(i),this}function d(t){var i=t||{};if(i.url){l(i.url);return webapp?e.showLog("web暂不支持open方法","bui.file.open:web"):w.open(i),this}}function f(e){return b.toBase64(e),this}var h,p,g,v,m,b,w,y,x={size:10,"native":!0},k={getFolder:r,removeFolder:c,getFile:s,getFileName:l,removeFile:u,toBase64:f,open:d,init:n},T=k.config=t.extend(!0,{},x,e.config.file,i);return floderData="",webapp=T["native"]&&e.isWebapp||!T["native"]&&!e.isWebapp,n(T),k},e}(bui||{},libs),function(e,t){return e.upload=function(i){function n(t){return v=e.loading({callback:function(){u()}}),m=e.fileselect({"native":t["native"],mediaType:t.mediaType}),I||(w=e["native"].upload&&e["native"].upload(t,{loading:v,fileselect:m,module:C})||{}),t.data?(c(t),this):this}function a(e){var t=m.add.bind(C);return t(e),this}function r(e,t){return m.remove(e,t),this}function o(){return m.clear(),this}function l(e){return m.toBase64(e),this}function s(){return m.data()}function c(e){var i=t.extend(!0,{},O,e);if(x=i.url,y=m.value(),S=i.showProgress,y){if(S&&v.show(),I){var n=i.data,a=new FormData;a.append(i.fileKey,y);for(var r in n)a.append(r,n[r]);i.data=a,d(i)}else w.start(i);return this}}function u(e){return I?(v&&v.stop(),b&&b.abort(),e&&e.call(C,v,b)):w.stop(e),this}function d(e){var i=e.onSuccess,n=e.onFail;return b=t.ajax({url:x,type:e.method,data:e.data,cache:e.cache,headers:e.headers,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=t.ajaxSettings.xhr();return f&&e.upload?(e.upload.addEventListener("progress",f,!1),e):void 0},success:function(e){p(),i&&i.call(C,e)},fail:function(e,t){p(),n&&n.call(C,e,t)}}),this}function f(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);k=t.toString()+"%",100>t?h(k):p(),j&&j.call(C,k)}})}function h(e){return v&&v.show({text:e}),this}function p(){return v&&v.stop(),this}function g(t){var i={loading:v,fileselect:m,ajax:b};return e.widget.call(i,t)}var v,m,b,w,y,x,k,T={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,"native":!0,contentType:!1,processData:!1,method:"POST",fileKey:"file",mimeType:"image/jpeg",mediaType:"allmedia",onProgress:null,onSuccess:null,onFail:null},O=t.extend(!0,{},T,e.config.upload,i),C={init:n,add:a,remove:r,clear:o,data:s,start:c,stop:u,toBase64:l,widget:g},S=O.showProgress,j=O.onProgress,I=O["native"]&&e.isWebapp||!O["native"]&&!e.isWebapp;return n(O),C},e}(bui||{},libs),function(e,t){return e.download=function(i){function n(t){function i(e){h.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){m=e.fullPath},onFail:function(t){h.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){m=e.fullPath},onFail:function(e){S&&S(e)}})}}),e.url&&a(e)}return y=e.loading({callback:function(){o()}}),h=e.file({"native":t["native"]}),O?i(t):p=e["native"].download&&e["native"].download(t,{file:h,loading:y,module:k})||{},this}function a(e){var i=t.extend(!0,{},T,e);g=i.url,v=encodeURI(g),C=i.onProgress,i.showProgress&&y.show({text:"0%"}),b=m+"/"+(e.fileName||h.getFileName(g)),O?(i.cache=!1,i.contentType=!1,i.processData=!1,f=t.ajax({url:v,type:i.method,data:i.data,cache:i.cache,headers:i.headers,contentType:i.contentType,processData:i.processData,timeout:i.timeout,xhr:function(){var e=t.ajaxSettings.xhr();return l&&e?(e.addEventListener("progress",l,!1),e):void 0},success:function(t){var n=e.fileName||h.getFileName(i.url);h.getFile({fileName:n,folderName:i.folderName,create:!0,onSuccess:function(e,t){i.onSuccess&&i.onSuccess.call(k,e.fullPath,t)}})},fail:function(e){c(),i.onFail&&i.onFail.call(k,e)}})):p.start(i)}function r(e){var i=t.extend(!0,{autoDown:!0},T,e),n=e.fileName||h.getFileName(i.url);h.getFile({fileName:n,folderName:i.folderName,onSuccess:function(e,t){i.onSuccess&&i.onSuccess.call(k,e.fullPath,e,t)},onFail:function(e){i.autoDown=a(i)}})}function o(e){O?(c(),f&&f.abort()):p.stop(),e&&e.call(k,y,f)}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);w=t.toString()+"%",100>t?s(w):c(),C&&C.call(k,w)}})}function s(e){y&&y.show({text:e})}function c(){y&&y.stop()}function u(e){return h.toBase64(e),this}function d(t){var i={loading:y,file:h,ajax:f};return e.widget.call(i,t)}var f,h,p,g,v,m,b,w,y,x={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download","native":!0,onProgress:null,onSuccess:null,onFail:null},k={getFile:r,start:a,stop:o,toBase64:u,init:n,widget:d},T=k.config=t.extend(!0,{},x,e.config.download,i),O=T["native"]&&e.isWebapp||!T["native"]&&!e.isWebapp,C=(T.showProgress,T.onProgress),S=T.onFail;return n(T),k},e}(bui||{},libs),function(e,t){return e.currentPlatform="webapp",e.ready=function(i){e.isWebapp="undefined"==typeof e.isWebapp?e.debug:e.isWebapp;var n=t.Deferred();if(e.isWebapp)t(document).ready(function(){i&&i(),e.trigger.call(e,"pageready"),n.resolve()});else{if("undefined"==typeof e["native"].ready)return e.showLog("当前bui.js为webapp版本,不支持原生方法,请更换bui.js为对应平台版本"),n;n=e["native"].ready&&e["native"].ready(i)||n}return n},e}(bui||{},libs),function(e,t){e.init=function(i){var n,a={id:".bui-page",height:0,header:"header",main:"main",footer:"footer"};if("object"==e["typeof"](i))n=t.extend({},a,e.config.init,i);else{var r={};r.height=i,n=t.extend({},a,r)}var o=n.height||document.documentElement.clientHeight;if(!(t(n.main).length<1)){try{var l=t(n.id),s=n.header.indexOf("#")>-1?e.obj(n.header)[0]:l.children(n.header)[0],c=n.footer.indexOf("#")>-1?e.obj(n.footer)[0]:l.children(n.footer)[0],u=n.main.indexOf("#")>-1?e.obj(n.main):l.children(n.main),d=s?s.offsetHeight:0,f=c?c.offsetHeight:0,h=o-d-f;u.height(h)}catch(p){e.showLog(p,"bui.init")}return h}},window.loader=e.loader(),e.define=loader.define,e.require=loader.require,e.map=loader.map,e["import"]=loader["import"],e.checkLoad=loader.checkLoad,e.checkDefine=loader.checkDefine,window.addEventListener?window.addEventListener("load",function(t){e.trigger.call(e,"onload")},!1):window.attachEvent("onload",function(t){e.trigger.call(e,"onload")}),t(document).ready(function(){e.isWebapp="undefined"==typeof e.isWebapp?e.debug:e.isWebapp,e.trigger.call(e,"pagebefore"),e.platform.isWindow()||e.platform.isMac()?window.viewport=e.viewport(60):e.platform.isIpad()?window.viewport=e.viewport(70):window.viewport=e.viewport(),e.config.init.auto&&e.init(),"function"==typeof FastClick&&FastClick.attach(document.body),e.trigger.call(e,"pageinit")});try{navigator.control.gesture(!1),navigator.control.longpressMenu(!1)}catch(i){}return"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("bui",[libs],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports.bui=e:window.bui=e,e}(bui||{},libs);